<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Open documentation for open Network OS" name=description><meta content="SR Linux" name=author><link href=https://learn.srlinux.dev/ndk/guide/architecture/ rel=canonical><link href=../../ rel=prev><link href=../agent/ rel=next><link href=../../../feed_rss_created.xml rel=alternate title="RSS feed" type=application/rss+xml><link href=../../../feed_rss_updated.xml rel=alternate title="RSS feed of updated content" type=application/rss+xml><link href=../../../images/srlinux.svg rel=icon><meta content="mkdocs-1.4.2, mkdocs-material-9.0.13+insiders-4.32.0" name=generator><title>NDK Architecture - Learn SR Linux</title><link href=../../../assets/stylesheets/main.22245cb8.min.css rel=stylesheet><link href=../../../assets/stylesheets/palette.6932e648.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=NokiaPureText:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"NokiaPureText";--md-code-font:"Fira Code"}</style><link href=../../../stylesheets/nokia.css rel=stylesheet><link href=../../../stylesheets/nokia-fonts.css rel=stylesheet><link href=../../../stylesheets/diagrams.css rel=stylesheet><link href=../../../stylesheets/animations.css rel=stylesheet><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-VNYX781Q48"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-VNYX781Q48",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-VNYX781Q48",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><!-- Determine title --><!-- The image needs to have an absolute URL --><!-- Open graph meta tags --><meta content=website property=og:type><meta content="Learn SR Linux - NDK Architecture" property=og:title><meta content="Open documentation for open Network OS" property=og:description><meta content=https://learn.srlinux.dev/ndk/guide/architecture/ property=og:url><meta content=https://learn.srlinux.dev/images/site-card.png property=og:image><meta content=image/png property=og:image:type><meta content=1200 property=og:image:width><meta content=630 property=og:image:height><!-- Twitter card tags --><meta content=summary_large_image name=twitter:card><meta content="Learn SR Linux - NDK Architecture" name=twitter:title><meta content="Open documentation for open Network OS" name=twitter:description><meta content=https://learn.srlinux.dev/images/site-card.png name=twitter:image><!-- NOINDEX --><link href=../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src=../../../assets/javascripts/glightbox.min.js></script></head> <body data-md-color-accent data-md-color-primary data-md-color-scheme=default dir=ltr> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#grpc-protocol-buffers> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button aria-label="Don't show this again" class="md-banner__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> <a href=https://github.com/nokia/srlinux-container-image> <span class=twemoji> <img alt=ðŸ¥³ class=twemoji src=https://raw.githubusercontent.com/twitter/twemoji/master/assets/svg/1f973.svg title=:partying_face:> </span> Enjoy the most recent <strong>SR Linux 22.11.2</strong> release! </a> </div> <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script> </aside> </div> <header class=md-header data-md-component=header> <nav aria-label=Header class="md-header__inner md-grid"> <a aria-label="Learn SR Linux" class="md-header__button md-logo" data-md-component=logo href=../../.. title="Learn SR Linux"> <?xml version="1.0" encoding="utf-8"?> <svg height=512 viewbox="0 0 512 512" width=512 xmlns=http://www.w3.org/2000/svg> <rect class=st0 height=512 style="fill: rgb(255, 255, 255);" width=512></rect> <g style transform="matrix(6.08856, 0, 0, 5.722229, -163.634598, -134.644638)"> <path class=st1 d="M45.2,59.4c0.9,0.6,2.2,1.1,4,1.7c1.8,0.6,3.8,0.9,6.2,0.9c2.5,0,4.3-0.5,5.5-1.5c1.2-1,1.8-2.4,1.8-4.1 c0-0.6-0.1-1.2-0.2-1.8c-0.2-0.6-0.5-1.1-0.9-1.6c-0.4-0.5-1-1-1.8-1.4c-0.8-0.4-1.7-0.8-2.9-1.1l-4.1-1.2 c-2.7-0.7-4.8-1.9-6.5-3.4c-1.6-1.5-2.4-3.6-2.4-6.2c0-1.4,0.2-2.7,0.8-3.9s1.2-2.3,2.2-3.2c1-0.9,2.2-1.7,3.7-2.2 c1.4-0.5,3.1-0.8,5-0.8c2.3,0,4.4,0.3,6.2,0.8c1.9,0.5,3.3,1.2,4.4,1.9l-1.7,3.5c-0.3-0.2-0.8-0.4-1.5-0.7 c-0.6-0.2-1.4-0.5-2.2-0.7c-0.8-0.2-1.7-0.4-2.6-0.5c-0.9-0.2-1.9-0.2-2.8-0.2c-2.2,0-4,0.5-5.2,1.5c-1.2,1-1.8,2.4-1.8,4.1 c0,1.5,0.5,2.7,1.4,3.6c0.9,0.9,2.4,1.6,4.6,2.2l4.1,1.2c2.9,0.8,5.2,2,6.7,3.5c1.5,1.5,2.2,3.7,2.2,6.4c0,1.5-0.3,2.9-0.8,4.1 s-1.3,2.3-2.3,3.2c-1,0.9-2.3,1.6-3.8,2.1c-1.5,0.5-3.2,0.7-5.1,0.7c-1.7,0-3.2-0.1-4.6-0.4c-1.4-0.3-2.6-0.6-3.6-0.9 c-1-0.3-1.9-0.7-2.5-1.1c-0.7-0.4-1.1-0.6-1.4-0.8L45.2,59.4z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M 97.5 65.4 L 92.1 65.4 L 83.7 51.2 L 78.5 51.2 L 78.5 65.4 L 74 65.4 L 74 30.3 L 84.2 30.3 C 86.4 30.3 88.2 30.6 89.6 31.3 C 91.1 32 92.2 32.8 93.1 33.9 C 94 35 94.6 36.1 95 37.3 C 95.4 38.5 95.5 39.7 95.5 40.8 C 95.5 43.3 94.9 45.4 93.6 47 C 92.3 48.6 90.5 49.8 88.2 50.6 L 97.5 65.4 Z M 83.81 47.191 C 86.21 47.191 88 46.7 89.2 45.6 C 90.4 44.4 91 42.9 91 40.8 C 91 38.8 90.4 37.2 89.2 36 C 88 34.8 86.3 34.2 84.1 34.2 L 78.6 34.2 L 78.6 47.2 L 83.8 47.2 L 83.81 47.191 Z" style="fill: rgb(0, 0, 0);"></path> </g> <g style transform="matrix(5.538847, 0, 0, 5.68973, -136.858704, -157.860214)"> <path class=st1 d=M46.2,109.9h-14V85.3h3.2V107h10.7V109.9z style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M51.5,88.8c-0.6,0-1.1-0.2-1.5-0.6c-0.4-0.4-0.5-0.9-0.5-1.5c0-0.6,0.2-1.1,0.5-1.5c0.4-0.4,0.9-0.6,1.5-0.6 s1.1,0.2,1.5,0.6c0.4,0.4,0.5,0.9,0.5,1.5s-0.2,1.1-0.5,1.5C52.6,88.6,52.1,88.8,51.5,88.8z M53.1,109.9H50V92.4h3.1V109.9z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M73,109.9h-3.1V99.1c0-0.9-0.1-1.6-0.3-2.2c-0.2-0.6-0.4-1-0.8-1.4c-0.3-0.3-0.7-0.6-1.2-0.7s-0.9-0.2-1.4-0.2 c-0.9,0-1.7,0.2-2.3,0.5c-0.6,0.4-1.2,0.9-1.6,1.5c-0.4,0.6-0.7,1.3-0.9,2.1c-0.2,0.8-0.3,1.6-0.3,2.5v8.6h-3.1V92.4H61l0.1,2.4 c0.1-0.3,0.4-0.6,0.7-0.9c0.3-0.3,0.7-0.7,1.2-0.9c0.5-0.3,1-0.5,1.7-0.7s1.4-0.3,2.2-0.3c2,0,3.6,0.6,4.6,1.7s1.6,2.8,1.6,4.8 V109.9z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M92.7,109.9h-2.9l-0.1-2.3c-0.1,0.3-0.4,0.6-0.7,0.9c-0.3,0.3-0.7,0.6-1.2,0.9c-0.5,0.3-1,0.5-1.7,0.7 c-0.6,0.2-1.4,0.3-2.2,0.3c-2,0-3.6-0.6-4.6-1.7c-1.1-1.2-1.6-2.8-1.6-4.8V92.4H81v11c0,0.8,0.1,1.5,0.3,2.1c0.2,0.5,0.4,1,0.7,1.3 c0.3,0.3,0.7,0.6,1.1,0.7c0.4,0.1,0.9,0.2,1.5,0.2c0.9,0,1.7-0.2,2.3-0.5c0.6-0.4,1.2-0.9,1.6-1.5s0.7-1.3,0.9-2.1 c0.2-0.8,0.3-1.6,0.3-2.5v-8.6h3.1V109.9z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d=M112,109.9h-3.7l-4.6-6.7l-4.6,6.7h-3.3l6.3-9l-5.9-8.5h3.7l4,5.8l4-5.8h3.3l-5.7,8.2L112,109.9z style="fill: rgb(0, 0, 0);"></path> </g> </svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Learn SR Linux </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> NDK Architecture </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input aria-label="Switch to dark mode" class=md-option data-md-color-accent data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary data-md-color-scheme=default id=__palette_0 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_1 hidden title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg> </label> <input aria-label="Switch to light mode" class=md-option data-md-color-accent data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary data-md-color-scheme=slate id=__palette_1 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_0 hidden title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"></path></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label=Search class=md-search__options> <button aria-label=Clear class="md-search__icon md-icon" tabindex=-1 title=Clear type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a class=md-source data-md-component=source href=https://github.com/srl-labs/learn-srlinux title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </div> <div class=md-source__repository> srl-labs/learn-srlinux </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav aria-label=Tabs class=md-tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a class=md-tabs__link href=../../..> Home </a> </li> <li class=md-tabs__item> <a href=../../../get-started/ class=md-tabs__link> Get Started </a> </li> <li class=md-tabs__item> <a href=../../../mgmt/ class=md-tabs__link> Management </a> </li> <li class=md-tabs__item> <a href=../../../programmability/ class="md-tabs__link md-tabs__link--active"> Programmability </a> </li> <li class=md-tabs__item> <a href=../../../tutorials/ class=md-tabs__link> Tutorials </a> </li> <li class=md-tabs__item> <a href=../../../community/ class=md-tabs__link> Community </a> </li> <li class=md-tabs__item> <a href=../../../blog/ class=md-tabs__link> Blog </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary md-nav--lifted" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label="Learn SR Linux" class="md-nav__button md-logo" data-md-component=logo href=../../.. title="Learn SR Linux"> <?xml version="1.0" encoding="utf-8"?> <svg height=512 viewbox="0 0 512 512" width=512 xmlns=http://www.w3.org/2000/svg> <rect class=st0 height=512 style="fill: rgb(255, 255, 255);" width=512></rect> <g style transform="matrix(6.08856, 0, 0, 5.722229, -163.634598, -134.644638)"> <path class=st1 d="M45.2,59.4c0.9,0.6,2.2,1.1,4,1.7c1.8,0.6,3.8,0.9,6.2,0.9c2.5,0,4.3-0.5,5.5-1.5c1.2-1,1.8-2.4,1.8-4.1 c0-0.6-0.1-1.2-0.2-1.8c-0.2-0.6-0.5-1.1-0.9-1.6c-0.4-0.5-1-1-1.8-1.4c-0.8-0.4-1.7-0.8-2.9-1.1l-4.1-1.2 c-2.7-0.7-4.8-1.9-6.5-3.4c-1.6-1.5-2.4-3.6-2.4-6.2c0-1.4,0.2-2.7,0.8-3.9s1.2-2.3,2.2-3.2c1-0.9,2.2-1.7,3.7-2.2 c1.4-0.5,3.1-0.8,5-0.8c2.3,0,4.4,0.3,6.2,0.8c1.9,0.5,3.3,1.2,4.4,1.9l-1.7,3.5c-0.3-0.2-0.8-0.4-1.5-0.7 c-0.6-0.2-1.4-0.5-2.2-0.7c-0.8-0.2-1.7-0.4-2.6-0.5c-0.9-0.2-1.9-0.2-2.8-0.2c-2.2,0-4,0.5-5.2,1.5c-1.2,1-1.8,2.4-1.8,4.1 c0,1.5,0.5,2.7,1.4,3.6c0.9,0.9,2.4,1.6,4.6,2.2l4.1,1.2c2.9,0.8,5.2,2,6.7,3.5c1.5,1.5,2.2,3.7,2.2,6.4c0,1.5-0.3,2.9-0.8,4.1 s-1.3,2.3-2.3,3.2c-1,0.9-2.3,1.6-3.8,2.1c-1.5,0.5-3.2,0.7-5.1,0.7c-1.7,0-3.2-0.1-4.6-0.4c-1.4-0.3-2.6-0.6-3.6-0.9 c-1-0.3-1.9-0.7-2.5-1.1c-0.7-0.4-1.1-0.6-1.4-0.8L45.2,59.4z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M 97.5 65.4 L 92.1 65.4 L 83.7 51.2 L 78.5 51.2 L 78.5 65.4 L 74 65.4 L 74 30.3 L 84.2 30.3 C 86.4 30.3 88.2 30.6 89.6 31.3 C 91.1 32 92.2 32.8 93.1 33.9 C 94 35 94.6 36.1 95 37.3 C 95.4 38.5 95.5 39.7 95.5 40.8 C 95.5 43.3 94.9 45.4 93.6 47 C 92.3 48.6 90.5 49.8 88.2 50.6 L 97.5 65.4 Z M 83.81 47.191 C 86.21 47.191 88 46.7 89.2 45.6 C 90.4 44.4 91 42.9 91 40.8 C 91 38.8 90.4 37.2 89.2 36 C 88 34.8 86.3 34.2 84.1 34.2 L 78.6 34.2 L 78.6 47.2 L 83.8 47.2 L 83.81 47.191 Z" style="fill: rgb(0, 0, 0);"></path> </g> <g style transform="matrix(5.538847, 0, 0, 5.68973, -136.858704, -157.860214)"> <path class=st1 d=M46.2,109.9h-14V85.3h3.2V107h10.7V109.9z style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M51.5,88.8c-0.6,0-1.1-0.2-1.5-0.6c-0.4-0.4-0.5-0.9-0.5-1.5c0-0.6,0.2-1.1,0.5-1.5c0.4-0.4,0.9-0.6,1.5-0.6 s1.1,0.2,1.5,0.6c0.4,0.4,0.5,0.9,0.5,1.5s-0.2,1.1-0.5,1.5C52.6,88.6,52.1,88.8,51.5,88.8z M53.1,109.9H50V92.4h3.1V109.9z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M73,109.9h-3.1V99.1c0-0.9-0.1-1.6-0.3-2.2c-0.2-0.6-0.4-1-0.8-1.4c-0.3-0.3-0.7-0.6-1.2-0.7s-0.9-0.2-1.4-0.2 c-0.9,0-1.7,0.2-2.3,0.5c-0.6,0.4-1.2,0.9-1.6,1.5c-0.4,0.6-0.7,1.3-0.9,2.1c-0.2,0.8-0.3,1.6-0.3,2.5v8.6h-3.1V92.4H61l0.1,2.4 c0.1-0.3,0.4-0.6,0.7-0.9c0.3-0.3,0.7-0.7,1.2-0.9c0.5-0.3,1-0.5,1.7-0.7s1.4-0.3,2.2-0.3c2,0,3.6,0.6,4.6,1.7s1.6,2.8,1.6,4.8 V109.9z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M92.7,109.9h-2.9l-0.1-2.3c-0.1,0.3-0.4,0.6-0.7,0.9c-0.3,0.3-0.7,0.6-1.2,0.9c-0.5,0.3-1,0.5-1.7,0.7 c-0.6,0.2-1.4,0.3-2.2,0.3c-2,0-3.6-0.6-4.6-1.7c-1.1-1.2-1.6-2.8-1.6-4.8V92.4H81v11c0,0.8,0.1,1.5,0.3,2.1c0.2,0.5,0.4,1,0.7,1.3 c0.3,0.3,0.7,0.6,1.1,0.7c0.4,0.1,0.9,0.2,1.5,0.2c0.9,0,1.7-0.2,2.3-0.5c0.6-0.4,1.2-0.9,1.6-1.5s0.7-1.3,0.9-2.1 c0.2-0.8,0.3-1.6,0.3-2.5v-8.6h3.1V109.9z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d=M112,109.9h-3.7l-4.6-6.7l-4.6,6.7h-3.3l6.3-9l-5.9-8.5h3.7l4,5.8l4-5.8h3.3l-5.7,8.2L112,109.9z style="fill: rgb(0, 0, 0);"></path> </g> </svg> </a> Learn SR Linux </label> <div class=md-nav__source> <a class=md-source data-md-component=source href=https://github.com/srl-labs/learn-srlinux title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </div> <div class=md-source__repository> srl-labs/learn-srlinux </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../..> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../get-started/ class=md-nav__link> <span class=md-ellipsis> Get Started </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../mgmt/ class=md-nav__link> <span class=md-ellipsis> Management </span> </a> </div> <nav aria-expanded=false aria-labelledby=__nav_3_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Management </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_4 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../programmability/ class=md-nav__link> <span class=md-ellipsis> Programmability </span> </a> <label class=md-nav__link for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=true aria-labelledby=__nav_4_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Programmability </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_2 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../yang/ class=md-nav__link> <span class=md-ellipsis> YANG </span> </a> <label class=md-nav__link for=__nav_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_4_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> YANG </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../yang/browser/ class=md-nav__link> <span class=md-ellipsis> YANG Browser </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_4_3 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../ class=md-nav__link> <span class=md-ellipsis> NDK </span> </a> <label class=md-nav__link for=__nav_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=true aria-labelledby=__nav_4_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> NDK </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_4_3_2 type=checkbox> <label class=md-nav__link for=__nav_4_3_2 id=__nav_4_3_2_label tabindex=0> <span class=md-ellipsis> Developers Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=true aria-labelledby=__nav_4_3_2_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_4_3_2> <span class="md-nav__icon md-icon"></span> Developers Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> NDK Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> NDK Architecture </span> </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#grpc-protocol-buffers> <span class=md-ellipsis> gRPC &amp; Protocol buffers </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ndk-service> <span class=md-ellipsis> NDK Service </span> </a> <nav aria-label="NDK Service" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#proto-files> <span class=md-ellipsis> Proto files </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#documentation> <span class=md-ellipsis> Documentation </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#operations-flow> <span class=md-ellipsis> Operations flow </span> </a> <nav aria-label="Operations flow" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#grpc-channel-and-ndk-manager-client> <span class=md-ellipsis> gRPC Channel and NDK Manager Client </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#agent-registration> <span class=md-ellipsis> Agent registration </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#registering-notifications> <span class=md-ellipsis> Registering notifications </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#streaming-notifications> <span class=md-ellipsis> Streaming notifications </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#handling-notifications> <span class=md-ellipsis> Handling notifications </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#updating-agents-state-data> <span class=md-ellipsis> Updating agent's state data </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#exiting-gracefully> <span class=md-ellipsis> Exiting gracefully </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../agent/ class=md-nav__link> <span class=md-ellipsis> Agent Structure </span> </a> </li> <li class=md-nav__item> <a href=../agent-install-and-ops/ class=md-nav__link> <span class=md-ellipsis> Agent Installation &amp; Operations </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_3_2_4 type=checkbox> <label class=md-nav__link for=__nav_4_3_2_4 id=__nav_4_3_2_4_label tabindex=0> <span class=md-ellipsis> Environment Setup </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_3_2_4_label class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_4> <span class="md-nav__icon md-icon"></span> Environment Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../env/go/ class=md-nav__link> <span class=md-ellipsis> Go </span> </a> </li> <li class=md-nav__item> <a href=../env/python/ class=md-nav__link> <span class=md-ellipsis> Python </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_3_2_5 type=checkbox> <label class=md-nav__link for=__nav_4_3_2_5 id=__nav_4_3_2_5_label tabindex=0> <span class=md-ellipsis> Developing with NDK </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_3_2_5_label class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_5> <span class="md-nav__icon md-icon"></span> Developing with NDK </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../dev/go/ class=md-nav__link> <span class=md-ellipsis> Go </span> </a> </li> <li class=md-nav__item> <a href=../dev/python/ class=md-nav__link> <span class=md-ellipsis> Python </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_3_3 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../apps/ class=md-nav__link> <span class=md-ellipsis> App Catalog </span> </a> <label class=md-nav__link for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_4_3_3_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> App Catalog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../apps/evpn-proxy/ class=md-nav__link> <span class=md-ellipsis> EVPN Proxy </span> </a> </li> <li class=md-nav__item> <a href=../../apps/kbutler/ class=md-nav__link> <span class=md-ellipsis> kButler </span> </a> </li> <li class=md-nav__item> <a href=../../apps/srl-prom-exporter/ class=md-nav__link> <span class=md-ellipsis> Prometheus Telemetry Exporter </span> </a> </li> <li class=md-nav__item> <a href=../../apps/satellite/ class=md-nav__link> <span class=md-ellipsis> Satellite Tracker </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../tutorials/ class=md-nav__link> <span class=md-ellipsis> Tutorials </span> </a> <label class=md-nav__link for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_5_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_2 type=checkbox> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> EVPN </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> EVPN </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_2_1 type=checkbox> <label class=md-nav__link for=__nav_5_2_1 id=__nav_5_2_1_label tabindex=0> <span class=md-ellipsis> Layer 2 EVPN </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_2_1_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_2_1> <span class="md-nav__icon md-icon"></span> Layer 2 EVPN </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tutorials/l2evpn/intro/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/l2evpn/fabric/ class=md-nav__link> <span class=md-ellipsis> Fabric configuration </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/l2evpn/evpn/ class=md-nav__link> <span class=md-ellipsis> EVPN configuration </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/l2evpn/summary/ class=md-nav__link> <span class=md-ellipsis> Summary </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_3 type=checkbox> <label class=md-nav__link for=__nav_5_3 id=__nav_5_3_label tabindex=0> <span class=md-ellipsis> Infrastructure </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_3_1 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../tutorials/infrastructure/kne/ class=md-nav__link> <span class=md-ellipsis> KNE </span> </a> <label class=md-nav__link for=__nav_5_3_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_5_3_1_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_3_1> <span class="md-nav__icon md-icon"></span> KNE </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tutorials/infrastructure/kne/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/infrastructure/kne/topology/ class=md-nav__link> <span class=md-ellipsis> Topology </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_3_1_4 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../tutorials/infrastructure/kne/srl-with-oc-services/ class=md-nav__link> <span class=md-ellipsis> SR Linux with Openconfig services </span> </a> </div> <nav aria-expanded=false aria-labelledby=__nav_5_3_1_4_label class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_5_3_1_4> <span class="md-nav__icon md-icon"></span> SR Linux with Openconfig services </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_4 type=checkbox> <label class=md-nav__link for=__nav_5_4 id=__nav_5_4_label tabindex=0> <span class=md-ellipsis> MPLS </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_4_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> MPLS </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_4_1 type=checkbox> <label class=md-nav__link for=__nav_5_4_1 id=__nav_5_4_1_label tabindex=0> <span class=md-ellipsis> LDP-based MPLS </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_4_1_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_4_1> <span class="md-nav__icon md-icon"></span> LDP-based MPLS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tutorials/mpls/mpls-ldp/intro/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/mpls/mpls-ldp/routing/ class=md-nav__link> <span class=md-ellipsis> Routing </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/mpls/mpls-ldp/ldp/ class=md-nav__link> <span class=md-ellipsis> LDP </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_5 type=checkbox> <label class=md-nav__link for=__nav_5_5 id=__nav_5_5_label tabindex=0> <span class=md-ellipsis> Programmability </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_5_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> Programmability </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_5_1 type=checkbox> <label class=md-nav__link for=__nav_5_5_1 id=__nav_5_5_1_label tabindex=0> <span class=md-ellipsis> Event Handler </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_5_1_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_5_1> <span class="md-nav__icon md-icon"></span> Event Handler </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_5_1_1 type=checkbox> <label class=md-nav__link for=__nav_5_5_1_1 id=__nav_5_5_1_1_label tabindex=0> <span class=md-ellipsis> Oper Group </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_5_1_1_label class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_5_5_1_1> <span class="md-nav__icon md-icon"></span> Oper Group </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tutorials/programmability/event-handler/oper-group/oper-group-intro/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/programmability/event-handler/oper-group/lab/ class=md-nav__link> <span class=md-ellipsis> Lab setup </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/programmability/event-handler/oper-group/problem-statement/ class=md-nav__link> <span class=md-ellipsis> Problem statement </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/programmability/event-handler/oper-group/oper-group-cfg/ class=md-nav__link> <span class=md-ellipsis> Configuring oper-group </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/programmability/event-handler/oper-group/script/ class=md-nav__link> <span class=md-ellipsis> Script </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/programmability/event-handler/oper-group/opergroup-operation/ class=md-nav__link> <span class=md-ellipsis> Oper group in action </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/programmability/event-handler/oper-group/summary/ class=md-nav__link> <span class=md-ellipsis> Summary </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_5_2 type=checkbox> <label class=md-nav__link for=__nav_5_5_2 id=__nav_5_5_2_label tabindex=0> <span class=md-ellipsis> JSON-RPC </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_5_2_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_5_2> <span class="md-nav__icon md-icon"></span> JSON-RPC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tutorials/programmability/json-rpc/basics/ class=md-nav__link> <span class=md-ellipsis> Basics </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/programmability/json-rpc/ansible/ class=md-nav__link> <span class=md-ellipsis> Ansible </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../community/ class=md-nav__link> <span class=md-ellipsis> Community </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_7 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../blog/ class=md-nav__link> <span class=md-ellipsis> Blog </span> </a> <label class=md-nav__link for=__nav_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_7_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../blog/subscribe/ class=md-nav__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19 7.38 20 6.18 20 5 20 4 19 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1Z"></path></svg> <span class=md-ellipsis> Subscribe </span> </a> </li> <li class=md-nav__item> <a href=../../../blog/tags/ class=md-nav__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M5.5 7A1.5 1.5 0 0 1 4 5.5 1.5 1.5 0 0 1 5.5 4 1.5 1.5 0 0 1 7 5.5 1.5 1.5 0 0 1 5.5 7m15.91 4.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.11 0-2 .89-2 2v7c0 .55.22 1.05.59 1.41l8.99 9c.37.36.87.59 1.42.59.55 0 1.05-.23 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.56-.23-1.06-.59-1.42Z"></path></svg> <span class=md-ellipsis> Tags </span> </a> </li> <li class=md-nav__item> <a href=../../../blog/media/ class=md-nav__link> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M319.4 372c48.5-31.3 80.6-85.9 80.6-148 0-97.2-78.8-176-176-176S48 126.8 48 224c0 62.1 32.1 116.6 80.6 148 1.2 17.3 4 38 7.2 57.1l.2 1C56 395.8 0 316.5 0 224 0 100.3 100.3 0 224 0s224 100.3 224 224c0 92.5-56 171.9-136 206.1l.2-1.1c3.1-19.2 6-39.8 7.2-57zm-2.3-38.1c-1.6-5.7-3.9-11.1-7-16.2-5.8-9.7-13.5-17-21.9-22.4 19.5-17.6 31.8-43 31.8-71.3 0-53-43-96-96-96s-96 43-96 96c0 28.3 12.3 53.8 31.8 71.3-8.4 5.4-16.1 12.7-21.9 22.4-3.1 5.1-5.4 10.5-7 16.2C99.8 307.5 80 268 80 224c0-79.5 64.5-144 144-144s144 64.5 144 144c0 44-19.8 83.5-50.9 109.9zM224 312c32.9 0 64 8.6 64 43.8 0 33-12.9 104.1-20.6 132.9-5.1 19-24.5 23.4-43.4 23.4s-38.2-4.4-43.4-23.4C172.8 460.2 160 389 160 355.9c0-35.1 31.1-43.8 64-43.8zm0-32c-30.9 0-56-25.1-56-56s25.1-56 56-56 56 25.1 56 56-25.1 56-56 56z"></path></svg> <span class=md-ellipsis> In the Media </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#grpc-protocol-buffers> <span class=md-ellipsis> gRPC &amp; Protocol buffers </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ndk-service> <span class=md-ellipsis> NDK Service </span> </a> <nav aria-label="NDK Service" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#proto-files> <span class=md-ellipsis> Proto files </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#documentation> <span class=md-ellipsis> Documentation </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#operations-flow> <span class=md-ellipsis> Operations flow </span> </a> <nav aria-label="Operations flow" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#grpc-channel-and-ndk-manager-client> <span class=md-ellipsis> gRPC Channel and NDK Manager Client </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#agent-registration> <span class=md-ellipsis> Agent registration </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#registering-notifications> <span class=md-ellipsis> Registering notifications </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#streaming-notifications> <span class=md-ellipsis> Streaming notifications </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#handling-notifications> <span class=md-ellipsis> Handling notifications </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#updating-agents-state-data> <span class=md-ellipsis> Updating agent's state data </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#exiting-gracefully> <span class=md-ellipsis> Exiting gracefully </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a class="md-content__button md-icon" href=https://github.com/srl-labs/learn-srlinux/edit/main/docs/ndk/guide/architecture.md title="Edit this page"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"></path></svg> </a> <h1>NDK Architecture</h1> <script async src=https://cdn.jsdelivr.net/gh/hellt/drawio-js@main/embed2.js type=text/javascript></script> <p>SR Linux provides a Software Development Kit (SDK) to assist operators with developing agents that run alongside SR Linux applications. This SDK is named NetOps Development Kit, or NDK for short.</p> <p>NDK allows operators to write applications (a.k.a agents) that deeply integrate with other native SR Linux applications. The deep integration is the courtesy of the NDK gRPC service that enables custom applications to interact with other SR Linux applications via Impart Database (IDB).</p> <p>In Fig. 1, custom NDK applications <code>app-1</code> and <code>app-2</code> interact with other SR Linux subsystems via gRPC-based NDK service.</p> <figure> <div class=mxgraph data-mxgraph='{"page":0,"zoom":1.5,"highlight":"#0000ff","nav":true,"check-visible-state":true,"resize":true,"url":"https://raw.githubusercontent.com/srl-labs/learn-srlinux/diagrams/ndk.drawio"}' style="max-width:100%;border:1px solid transparent;margin:0 auto; display:block;"></div> <figcaption>Fig 1. NDK applications integration</figcaption> </figure> <p>In addition to the traditional tasks of reading and writing configuration, NDK-based applications gain low-level access to the SR Linux system. For example, these apps can install FIB routes or listen to LLDP events.</p> <h2 id=grpc-protocol-buffers>gRPC &amp; Protocol buffers<a class=headerlink href=#grpc-protocol-buffers title="Permanent link">#</a></h2> <p>NDK uses gRPC - a high-performance, open-source framework for remote procedure calls.</p> <p>gRPC framework by default uses <a href=https://developers.google.com/protocol-buffers>Protocol buffers</a> as its Interface Definition Language as well as the underlying message exchange format.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>Protocol buffers are Google's language-neutral, platform-neutral, extensible mechanism for serializing structured data â€“ think XML, but smaller, faster, and simpler. You define how you want your data to be structured once, then you can use special generated source code to easily write and read your structured data to and from a variety of data streams and using a variety of languages.</p> </div> <p>In gRPC, a client application can directly call a method on a server application on a different machine as if it were a local object. As in many RPC systems, gRPC is based around the idea of defining a service, specifying the methods that can be called remotely with their parameters and return types.</p> <p>On the server side, the server implements this interface and runs a gRPC server to handle client calls. On the client side, the client provides the same methods as the server.</p> <figure> <div class=mxgraph data-mxgraph='{"page":2,"zoom":1,"highlight":"#0000ff","nav":true,"check-visible-state":true,"resize":true,"url":"https://raw.githubusercontent.com/srl-labs/learn-srlinux/diagrams/ndk.drawio"}' style="max-width:100%;border:1px solid transparent;margin:0 auto; display:block;"></div> <figcaption>Fig 2. gRPC client-server interactions</figcaption> </figure> <p>Leveraging gRPC and protobufs provides some substantial benefits for NDK users:</p> <ol> <li>Language neutrality: NDK apps can be written in any language for which protobuf compiler exists. Go, Python, C, Java, Ruby, and more languages are supported by Protocol buffers enabling SR Linux users to write apps in the language of their choice.</li> <li>High-performance: protobuf-encoded messaging is an efficient way to exchange data in a client-server environment. Applications that consume high-volume streams of data (for example, route updates) benefit from an efficient and fast message delivery enabled by protobuf.</li> <li>Backwards API compatibility: a protobuf design property of using IDs for data fields makes it possible to evolve API over time without ever breaking backward compatibility. Old clients will still be able to consume data stored in the original fields, whereas new clients will benefit from accessing data stored in the new fields.</li> </ol> <h2 id=ndk-service>NDK Service<a class=headerlink href=#ndk-service title="Permanent link">#</a></h2> <p>NDK provides a collection of <a href=https://grpc.io/ >gRPC</a> services, each of which enables custom applications to interact with a particular subsystem on an SR Linux OS, delivering a high level of integration and extensibility.</p> <p>With this architecture, NDK agents act as gRPC clients that execute remote procedure calls (RPC) on a system that implements a gRPC server.</p> <p>On SR Linux, <code>ndk_mgr</code> is the application that runs the NDK gRPC server. Fig 3. shows how custom agents interact via gRPC with NDK, and NDK executes the remote procedure and communicates with other system applications through IDB and pub/sub interface to return the result of the RPC to a client.</p> <figure> <div class=mxgraph data-mxgraph='{"page":1,"zoom":1.5,"highlight":"#0000ff","nav":true,"check-visible-state":true,"resize":true,"url":"https://raw.githubusercontent.com/srl-labs/learn-srlinux/diagrams/ndk.drawio"}' style="max-width:100%;border:1px solid transparent;margin:0 auto; display:block;"></div> <figcaption>Fig 3. gRPC as an Inter Process Communication (IPC) protocol</figcaption> </figure> <p>As a result, custom applications are able to communicate with the native SR Linux apps as if they were shipped with SR Linux OS.</p> <h3 id=proto-files>Proto files<a class=headerlink href=#proto-files title="Permanent link">#</a></h3> <p>NDK services, underlying RPCs, and messages are defined in <code>.proto</code> files. These files are used to generate language bindings essential for the NDK apps development process and serve as the data modeling language for the NDK itself.</p> <p>The source <code>.proto</code> files for NDK are open and published in <a href=https://github.com/nokia/srlinux-ndk-protobufs><code>nokia/srlinux-ndk-protobufs</code></a> repository. Anyone can clone this repository and explore the NDK gRPC services or build language bindings for the programming language of their choice.</p> <h3 id=documentation>Documentation<a class=headerlink href=#documentation title="Permanent link">#</a></h3> <p>Although the proto files are human-readable, it is easier to browse the NDK services using the generated documentation that we keep in the same <a href=https://github.com/nokia/srlinux-ndk-protobufs><code>nokia/srlinux-ndk-protobufs</code></a> repo. The HTML document is provided in the readme file that appears when a user selects a tag that matches the NDK release version<sup id=fnref:1><a class=footnote-ref href=#fn:1>1</a></sup>.</p> <p>The generated documentation provides the developers with a human-readable reference of all the services, messages, and types that comprise the NDK service.</p> <h3 id=operations-flow>Operations flow<a class=headerlink href=#operations-flow title="Permanent link">#</a></h3> <p>Regardless of the language in which the agents are written, at a high level, the following flow of operations applies to all agents when interacting with the NDK service:</p> <figure> <div class=mxgraph data-mxgraph='{"page":3,"zoom":1.5,"highlight":"#0000ff","nav":true,"check-visible-state":true,"resize":true,"url":"https://raw.githubusercontent.com/srl-labs/learn-srlinux/diagrams/ndk.drawio"}' style="max-width:100%;border:1px solid transparent;margin:0 auto; display:block;"></div> <figcaption>Fig 4. NDK operations flow</figcaption> </figure> <ol> <li>Establish gRPC channel with NDK manager and instantiate an NDK client</li> <li>Register the agent with the NDK manager</li> <li>Register notification streams for different types of NDK services (config, lldp, interface, etc.)</li> <li>Start streaming notifications</li> <li>Handle the streamed notifications</li> <li>Update agent's state data if needed</li> <li>Exit gracefully if required</li> </ol> <p>To better understand the steps each agent undergoes, we will explain them in a language-neutral manner. For language-specific implementations, read the "Developing with NDK" chapter.</p> <h4 id=grpc-channel-and-ndk-manager-client>gRPC Channel and NDK Manager Client<a class=headerlink href=#grpc-channel-and-ndk-manager-client title="Permanent link">#</a></h4> <p>NDK agents communicate with gRPC based NDK service by invoking RPCs and handling responses. An RPC generally takes in a client request message and returns a response message from the server.</p> <p>A gRPC channel must be established before communicating with the NDK manager application running on SR Linux<sup id=fnref:2><a class=footnote-ref href=#fn:2>2</a></sup>. NDK server runs on port <code>50053</code>; agents which are installed on SR Linux OS use <code>localhost:50053</code> socket to establish the gRPC channel.</p> <p>Once the gRPC channel is set up, a gRPC client (often called <em>stub</em>) needs to be created to perform RPCs. Each gRPC service needs to have its own client. In NDK, the <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.SdkMgrService><code>SdkMgrService</code></a> service is the first service that agents interact with, therefore, users first need to create the NDK Manager Client (Mgr Client on diagram) that will be able to call RPCs defined for <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.SdkMgrService><code>SdkMgrService</code></a>.</p> <h4 id=agent-registration>Agent registration<a class=headerlink href=#agent-registration title="Permanent link">#</a></h4> <p>Agent must be first registered with SRLinux NDK by calling <a href=https://github.com/nokia/srlinux-ndk-protobufs/blob/protos/ndk/sdk_service.proto#L32><code>AgentRegister</code></a> RPC of <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.SdkMgrService><code>SdkMgrService</code></a>. Initial agent state is created during the registration process.</p> <p>An <code>AgentRegistrationResponse</code> is returned (omitted in Fig. 4) with the status of the registration process.</p> <h4 id=registering-notifications>Registering notifications<a class=headerlink href=#registering-notifications title="Permanent link">#</a></h4> <p>Agents interact with other services like Network Instance, Config, LLDP, BFD by subscribing to notification updates from these services.</p> <p>Before subscribing to a notification stream of a certain service the subscription stream needs to be created. To create it, a client of <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.SdkMgrService><code>SdkMgrService</code></a> calls <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.SdkMgrService><code>NotificationRegister</code></a> RPC with <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.NotificationRegisterRequest><code>NotificationRegistrationRequest</code></a> field <code>Op</code> set to <code>Create</code> and other fields absent.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p><code>NotificationRegistrationRequest</code> message's field <code>Op</code> (for Operation) may have one of the following values:</p> <ul> <li><code>Create</code> creates a subscription stream and returns a <code>StreamId</code> that is used when adding subscriptions with the <code>AddSubscription</code> operation.</li> <li><code>Delete</code> deletes the existing subscription stream that has a particular <code>SubId</code>.</li> <li><code>AddSubscription</code> adds a subscription. The stream will now be able to stream notifications of that subscription type (e.g., Intf, NwInst, etc).</li> <li><code>DeleteSubscription</code> deletes the previously added subscription.</li> </ul> </div> <p>When <code>Op</code> field is set to <code>Create</code>, NDK Manager responds with <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.NotificationRegisterResponse><code>NotificationRegisterResponse</code></a> message with <code>stream_id</code> field set to some value. The stream has been created, and the subscriptions can be added to the created stream.</p> <p>To subscribe to a certain service notification updates another call of <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.SdkMgrService><code>NotificationRegister</code></a> RPC is made with the following fields set:</p> <ul> <li><code>stream_id</code> set to an obtained value from the <code>NotificationRegisterResponse</code></li> <li><code>Op</code> is set to <code>AddSubscription</code></li> <li>one of the <a href=https://github.com/nokia/srlinux-ndk-protobufs/blob/protos/ndk/sdk_service.proto#L125><code>subscription_types</code></a> is set according to the desired service notifications. For example, if notifications from the <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk%2fconfig_service.proto><code>Config</code></a> service are of interest, then <code>config</code> field of type <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.ConfigSubscriptionRequest><code>ConfigSubscriptionRequest</code></a> is set.</li> </ul> <p><a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.NotificationRegisterResponse><code>NotificationRegisterResponse</code></a> message follows the request and contains the same <code>stream_id</code> but now also the <code>sub_id</code> field - subscription identifier. At this point agent successfully indicated its desire to receive notifications from certain services, but the notification streams haven't been started yet.</p> <h4 id=streaming-notifications>Streaming notifications<a class=headerlink href=#streaming-notifications title="Permanent link">#</a></h4> <p>Requesting applications to send notifications is done by interfacing with <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.SdkNotificationService><code>SdkNotificationService</code></a>. As this is another gRPC service, it requires its own client - Notification client.</p> <p>To initiate streaming of updates based on the agent subscriptions the Notification Client executes <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.SdkNotificationService><code>NotificationStream</code></a> RPC which has <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.NotificationStreamRequest><code>NotificationStreamRequest</code></a> message with <code>stream_id</code> field set to the ID of a stream to be used. This RPC returns a stream of <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.NotificationStreamResponse><code>NotificationStreamResponse</code></a>, which makes this RPC of type "server streaming RPC".</p> <details class=info> <summary>Server-streaming RPC</summary> <p>A server-streaming RPC is similar to a unary RPC, except that the server returns a stream of messages in response to a client's request. After sending all its messages, the server's status details (status code and optional status message) and optional trailing metadata are sent to the client. This completes processing on the server side. The client completes once it has all the server's messages.</p> </details> <p><code>NotificationStreamResponse</code> message represents a notification stream response that contains one or more notifications. The <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.Notification><code>Notification</code></a> message contains one of the <a href=https://github.com/nokia/srlinux-ndk-protobufs/blob/57386044bacdb4689eda414bc07bd78e17b170c3/ndk/sdk_service.proto#L204><code>subscription_types</code></a> notifications, which will be set in accordance to what notifications were subscribed by the agent.</p> <p>In our example, we sent <code>ConfigSubscriptionRequest</code> inside the <code>NotificationRegisterRequest</code>, hence the notifications that we will get back for that <code>stream_id</code> will contain <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.ConfigNotification><code>ConfigNotification</code></a> messages inside <code>Notification</code> of a <code>NotificationStreamResponse</code>.</p> <h4 id=handling-notifications>Handling notifications<a class=headerlink href=#handling-notifications title="Permanent link">#</a></h4> <p>The agent handles the stream of notifications by analyzing which concrete type of notification was read from the stream. The Server streaming RPC will provide notifications till the last available one; the agent then reads out the incoming notifications and handles the messages contained within them.</p> <p>The handling of notifications is done when the last notification is sent by the server. At this point, the agent may perform some work on the received data and, if needed, update the agent's state if it has one.</p> <h4 id=updating-agents-state-data>Updating agent's state data<a class=headerlink href=#updating-agents-state-data title="Permanent link">#</a></h4> <p>Each agent may keep state and configuration data modeled in YANG. When an agent needs to set/update its own state data (for example, when it made some calculations based on received notifications), it needs to use <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.SdkMgrTelemetryService><code>SdkMgrTelemetryService</code></a> and a corresponding client.</p> <figure> <div class=mxgraph data-mxgraph='{"page":4,"zoom":1.5,"highlight":"#0000ff","nav":true,"check-visible-state":true,"resize":true,"url":"https://raw.githubusercontent.com/srl-labs/learn-srlinux/diagrams/ndk.drawio"}' style="max-width:100%;border:1px solid transparent;margin:0 auto; display:block;"></div> <figcaption>Fig 5. Updating agent's state flow</figcaption> </figure> <p>The state that an agent intends to have will be available for gNMI telemetry, CLI access, and JSON-RPC retrieval, as it essentially becomes part of the SR Linux state.</p> <p>Updating or initializing agent's state with data is done with <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.SdkMgrTelemetryService><code>TelemetryAddOrUpdate</code></a> RPC that has a request of type <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.TelemetryUpdateRequest><code>TelemetryUpdateRequest</code></a> that encloses a list of <a href=https://rawcdn.githack.com/nokia/srlinux-ndk-protobufs/v0.1.0/doc/index.html#ndk.TelemetryInfo><code>TelemetryInfo</code></a> messages. Each <code>TelemetryInfo</code> message contains a <code>key</code> field that points to a subtree of agent's YANG model that needs to be updated with the JSON data contained within <code>data</code> field.</p> <h4 id=exiting-gracefully>Exiting gracefully<a class=headerlink href=#exiting-gracefully title="Permanent link">#</a></h4> <p>When an agent needs to stop its operation and be removed from the SR Linux system, it needs to be unregistered by invoking <code>AgentUnRegister</code> RPC of the <code>SdkMgrService</code>. The gRPC connection to the NDK server needs to be closed.</p> <p>When unregistered, the agent's state data will be removed from SR Linux system and will no longer be accessible to any of the management interfaces.</p> <div class=footnote> <hr> <ol> <li id=fn:1> <p>For example, <a href=https://github.com/nokia/srlinux-ndk-protobufs/tree/v0.1.0>here</a> you will find the auto-generated documentation for the latest NDK version at the moment of this writing.Â <a class=footnote-backref href=#fnref:1 title="Jump back to footnote 1 in the text">â†©</a></p> </li> <li id=fn:2> <p><code>sdk_mgr</code> is the name of the application that implements NDK gRPC server and runs on SR Linux OS.Â <a class=footnote-backref href=#fnref:2 title="Jump back to footnote 2 in the text">â†©</a></p> </li> </ol> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <a class="md-top md-icon" data-md-component=top hidden href=#> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg> Back to top </a> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <!--
  Copyright (c) 2016-2022 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Copyright and theme information --> <div class=md-copyright> <div class=md-copyright__highlight> Copyright Â© 2021-2023 Nokia </div> Made with <span class="twemoji mdx-heart"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M14 20.408c-.492.308-.903.546-1.192.709-.153.086-.308.17-.463.252h-.002a.75.75 0 0 1-.686 0 16.709 16.709 0 0 1-.465-.252 31.147 31.147 0 0 1-4.803-3.34C3.8 15.572 1 12.331 1 8.513 1 5.052 3.829 2.5 6.736 2.5 9.03 2.5 10.881 3.726 12 5.605 13.12 3.726 14.97 2.5 17.264 2.5 20.17 2.5 23 5.052 23 8.514c0 3.818-2.801 7.06-5.389 9.262A31.146 31.146 0 0 1 14 20.408Z"></path></svg> </span> by <a href=https://github.com/srl-labs rel=noopener target=_blank> SR Linux team </a> </div> <div class=md-social> <a class=md-social__link href=https://discord.gg/tZvgjQ6PZf rel=noopener target=_blank title=discord.gg> <svg viewbox="0 0 640 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"></path></svg> </a> <a class=md-social__link href=https://github.com/srl-labs rel=noopener target=_blank title=github.com> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </a> <a class=md-social__link href=https://twitter.com/ntdvps rel=noopener target=_blank title=twitter.com> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.top", "navigation.instant", "navigation.tabs", "search.suggest", "content.code.annotate", "content.code.copy", "content.code.select", "content.action.edit", "toc.follow", "content.tooltips", "navigation.indexes", "announce.dismiss"], "search": "../../../assets/javascripts/workers/search.6c7302c4.min.js", "tags": {"media": "media"}, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.542a4128.min.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body> </html>