<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Open documentation for open Network OS" name=description><meta content="SR Linux" name=author><link href=https://learn.srlinux.dev/tutorials/l2evpn/fabric/ rel=canonical><link href=../intro/ rel=prev><link href=../evpn/ rel=next><link href=../../../feed_rss_created.xml rel=alternate title="RSS feed" type=application/rss+xml><link href=../../../feed_rss_updated.xml rel=alternate title="RSS feed of updated content" type=application/rss+xml><link href=../../../images/srlinux.svg rel=icon><meta content="mkdocs-1.4.2, mkdocs-material-9.0.13+insiders-4.32.0" name=generator><title>L2 EVPN with SR Linux - Learn SR Linux</title><link href=../../../assets/stylesheets/main.22245cb8.min.css rel=stylesheet><link href=../../../assets/stylesheets/palette.6932e648.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=NokiaPureText:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"NokiaPureText";--md-code-font:"Fira Code"}</style><link href=../../../stylesheets/nokia.css rel=stylesheet><link href=../../../stylesheets/nokia-fonts.css rel=stylesheet><link href=../../../stylesheets/diagrams.css rel=stylesheet><link href=../../../stylesheets/animations.css rel=stylesheet><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-VNYX781Q48"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-VNYX781Q48",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-VNYX781Q48",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><!-- Determine title --><!-- The image needs to have an absolute URL --><!-- Open graph meta tags --><meta content=website property=og:type><meta content="Learn SR Linux - L2 EVPN with SR Linux" property=og:title><meta content="Open documentation for open Network OS" property=og:description><meta content=https://learn.srlinux.dev/tutorials/l2evpn/fabric/ property=og:url><meta content=https://learn.srlinux.dev/images/site-card.png property=og:image><meta content=image/png property=og:image:type><meta content=1200 property=og:image:width><meta content=630 property=og:image:height><!-- Twitter card tags --><meta content=summary_large_image name=twitter:card><meta content="Learn SR Linux - L2 EVPN with SR Linux" name=twitter:title><meta content="Open documentation for open Network OS" name=twitter:description><meta content=https://learn.srlinux.dev/images/site-card.png name=twitter:image><!-- NOINDEX --><link href=../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src=../../../assets/javascripts/glightbox.min.js></script></head> <body data-md-color-accent data-md-color-primary data-md-color-scheme=default dir=ltr> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#leaf-spine-interfaces> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button aria-label="Don't show this again" class="md-banner__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> <a href=https://github.com/nokia/srlinux-container-image> <span class=twemoji> <img alt=ðŸ¥³ class=twemoji src=https://raw.githubusercontent.com/twitter/twemoji/master/assets/svg/1f973.svg title=:partying_face:> </span> Enjoy the most recent <strong>SR Linux 22.11.2</strong> release! </a> </div> <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script> </aside> </div> <header class=md-header data-md-component=header> <nav aria-label=Header class="md-header__inner md-grid"> <a aria-label="Learn SR Linux" class="md-header__button md-logo" data-md-component=logo href=../../.. title="Learn SR Linux"> <?xml version="1.0" encoding="utf-8"?> <svg height=512 viewbox="0 0 512 512" width=512 xmlns=http://www.w3.org/2000/svg> <rect class=st0 height=512 style="fill: rgb(255, 255, 255);" width=512></rect> <g style transform="matrix(6.08856, 0, 0, 5.722229, -163.634598, -134.644638)"> <path class=st1 d="M45.2,59.4c0.9,0.6,2.2,1.1,4,1.7c1.8,0.6,3.8,0.9,6.2,0.9c2.5,0,4.3-0.5,5.5-1.5c1.2-1,1.8-2.4,1.8-4.1 c0-0.6-0.1-1.2-0.2-1.8c-0.2-0.6-0.5-1.1-0.9-1.6c-0.4-0.5-1-1-1.8-1.4c-0.8-0.4-1.7-0.8-2.9-1.1l-4.1-1.2 c-2.7-0.7-4.8-1.9-6.5-3.4c-1.6-1.5-2.4-3.6-2.4-6.2c0-1.4,0.2-2.7,0.8-3.9s1.2-2.3,2.2-3.2c1-0.9,2.2-1.7,3.7-2.2 c1.4-0.5,3.1-0.8,5-0.8c2.3,0,4.4,0.3,6.2,0.8c1.9,0.5,3.3,1.2,4.4,1.9l-1.7,3.5c-0.3-0.2-0.8-0.4-1.5-0.7 c-0.6-0.2-1.4-0.5-2.2-0.7c-0.8-0.2-1.7-0.4-2.6-0.5c-0.9-0.2-1.9-0.2-2.8-0.2c-2.2,0-4,0.5-5.2,1.5c-1.2,1-1.8,2.4-1.8,4.1 c0,1.5,0.5,2.7,1.4,3.6c0.9,0.9,2.4,1.6,4.6,2.2l4.1,1.2c2.9,0.8,5.2,2,6.7,3.5c1.5,1.5,2.2,3.7,2.2,6.4c0,1.5-0.3,2.9-0.8,4.1 s-1.3,2.3-2.3,3.2c-1,0.9-2.3,1.6-3.8,2.1c-1.5,0.5-3.2,0.7-5.1,0.7c-1.7,0-3.2-0.1-4.6-0.4c-1.4-0.3-2.6-0.6-3.6-0.9 c-1-0.3-1.9-0.7-2.5-1.1c-0.7-0.4-1.1-0.6-1.4-0.8L45.2,59.4z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M 97.5 65.4 L 92.1 65.4 L 83.7 51.2 L 78.5 51.2 L 78.5 65.4 L 74 65.4 L 74 30.3 L 84.2 30.3 C 86.4 30.3 88.2 30.6 89.6 31.3 C 91.1 32 92.2 32.8 93.1 33.9 C 94 35 94.6 36.1 95 37.3 C 95.4 38.5 95.5 39.7 95.5 40.8 C 95.5 43.3 94.9 45.4 93.6 47 C 92.3 48.6 90.5 49.8 88.2 50.6 L 97.5 65.4 Z M 83.81 47.191 C 86.21 47.191 88 46.7 89.2 45.6 C 90.4 44.4 91 42.9 91 40.8 C 91 38.8 90.4 37.2 89.2 36 C 88 34.8 86.3 34.2 84.1 34.2 L 78.6 34.2 L 78.6 47.2 L 83.8 47.2 L 83.81 47.191 Z" style="fill: rgb(0, 0, 0);"></path> </g> <g style transform="matrix(5.538847, 0, 0, 5.68973, -136.858704, -157.860214)"> <path class=st1 d=M46.2,109.9h-14V85.3h3.2V107h10.7V109.9z style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M51.5,88.8c-0.6,0-1.1-0.2-1.5-0.6c-0.4-0.4-0.5-0.9-0.5-1.5c0-0.6,0.2-1.1,0.5-1.5c0.4-0.4,0.9-0.6,1.5-0.6 s1.1,0.2,1.5,0.6c0.4,0.4,0.5,0.9,0.5,1.5s-0.2,1.1-0.5,1.5C52.6,88.6,52.1,88.8,51.5,88.8z M53.1,109.9H50V92.4h3.1V109.9z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M73,109.9h-3.1V99.1c0-0.9-0.1-1.6-0.3-2.2c-0.2-0.6-0.4-1-0.8-1.4c-0.3-0.3-0.7-0.6-1.2-0.7s-0.9-0.2-1.4-0.2 c-0.9,0-1.7,0.2-2.3,0.5c-0.6,0.4-1.2,0.9-1.6,1.5c-0.4,0.6-0.7,1.3-0.9,2.1c-0.2,0.8-0.3,1.6-0.3,2.5v8.6h-3.1V92.4H61l0.1,2.4 c0.1-0.3,0.4-0.6,0.7-0.9c0.3-0.3,0.7-0.7,1.2-0.9c0.5-0.3,1-0.5,1.7-0.7s1.4-0.3,2.2-0.3c2,0,3.6,0.6,4.6,1.7s1.6,2.8,1.6,4.8 V109.9z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M92.7,109.9h-2.9l-0.1-2.3c-0.1,0.3-0.4,0.6-0.7,0.9c-0.3,0.3-0.7,0.6-1.2,0.9c-0.5,0.3-1,0.5-1.7,0.7 c-0.6,0.2-1.4,0.3-2.2,0.3c-2,0-3.6-0.6-4.6-1.7c-1.1-1.2-1.6-2.8-1.6-4.8V92.4H81v11c0,0.8,0.1,1.5,0.3,2.1c0.2,0.5,0.4,1,0.7,1.3 c0.3,0.3,0.7,0.6,1.1,0.7c0.4,0.1,0.9,0.2,1.5,0.2c0.9,0,1.7-0.2,2.3-0.5c0.6-0.4,1.2-0.9,1.6-1.5s0.7-1.3,0.9-2.1 c0.2-0.8,0.3-1.6,0.3-2.5v-8.6h3.1V109.9z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d=M112,109.9h-3.7l-4.6-6.7l-4.6,6.7h-3.3l6.3-9l-5.9-8.5h3.7l4,5.8l4-5.8h3.3l-5.7,8.2L112,109.9z style="fill: rgb(0, 0, 0);"></path> </g> </svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Learn SR Linux </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> L2 EVPN with SR Linux </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input aria-label="Switch to dark mode" class=md-option data-md-color-accent data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary data-md-color-scheme=default id=__palette_0 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_1 hidden title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg> </label> <input aria-label="Switch to light mode" class=md-option data-md-color-accent data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary data-md-color-scheme=slate id=__palette_1 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_0 hidden title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"></path></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label=Search class=md-search__options> <button aria-label=Clear class="md-search__icon md-icon" tabindex=-1 title=Clear type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a class=md-source data-md-component=source href=https://github.com/srl-labs/learn-srlinux title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </div> <div class=md-source__repository> srl-labs/learn-srlinux </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav aria-label=Tabs class=md-tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a class=md-tabs__link href=../../..> Home </a> </li> <li class=md-tabs__item> <a href=../../../get-started/ class=md-tabs__link> Get Started </a> </li> <li class=md-tabs__item> <a href=../../../mgmt/ class=md-tabs__link> Management </a> </li> <li class=md-tabs__item> <a href=../../../programmability/ class=md-tabs__link> Programmability </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> Tutorials </a> </li> <li class=md-tabs__item> <a href=../../../community/ class=md-tabs__link> Community </a> </li> <li class=md-tabs__item> <a href=../../../blog/ class=md-tabs__link> Blog </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary md-nav--lifted" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label="Learn SR Linux" class="md-nav__button md-logo" data-md-component=logo href=../../.. title="Learn SR Linux"> <?xml version="1.0" encoding="utf-8"?> <svg height=512 viewbox="0 0 512 512" width=512 xmlns=http://www.w3.org/2000/svg> <rect class=st0 height=512 style="fill: rgb(255, 255, 255);" width=512></rect> <g style transform="matrix(6.08856, 0, 0, 5.722229, -163.634598, -134.644638)"> <path class=st1 d="M45.2,59.4c0.9,0.6,2.2,1.1,4,1.7c1.8,0.6,3.8,0.9,6.2,0.9c2.5,0,4.3-0.5,5.5-1.5c1.2-1,1.8-2.4,1.8-4.1 c0-0.6-0.1-1.2-0.2-1.8c-0.2-0.6-0.5-1.1-0.9-1.6c-0.4-0.5-1-1-1.8-1.4c-0.8-0.4-1.7-0.8-2.9-1.1l-4.1-1.2 c-2.7-0.7-4.8-1.9-6.5-3.4c-1.6-1.5-2.4-3.6-2.4-6.2c0-1.4,0.2-2.7,0.8-3.9s1.2-2.3,2.2-3.2c1-0.9,2.2-1.7,3.7-2.2 c1.4-0.5,3.1-0.8,5-0.8c2.3,0,4.4,0.3,6.2,0.8c1.9,0.5,3.3,1.2,4.4,1.9l-1.7,3.5c-0.3-0.2-0.8-0.4-1.5-0.7 c-0.6-0.2-1.4-0.5-2.2-0.7c-0.8-0.2-1.7-0.4-2.6-0.5c-0.9-0.2-1.9-0.2-2.8-0.2c-2.2,0-4,0.5-5.2,1.5c-1.2,1-1.8,2.4-1.8,4.1 c0,1.5,0.5,2.7,1.4,3.6c0.9,0.9,2.4,1.6,4.6,2.2l4.1,1.2c2.9,0.8,5.2,2,6.7,3.5c1.5,1.5,2.2,3.7,2.2,6.4c0,1.5-0.3,2.9-0.8,4.1 s-1.3,2.3-2.3,3.2c-1,0.9-2.3,1.6-3.8,2.1c-1.5,0.5-3.2,0.7-5.1,0.7c-1.7,0-3.2-0.1-4.6-0.4c-1.4-0.3-2.6-0.6-3.6-0.9 c-1-0.3-1.9-0.7-2.5-1.1c-0.7-0.4-1.1-0.6-1.4-0.8L45.2,59.4z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M 97.5 65.4 L 92.1 65.4 L 83.7 51.2 L 78.5 51.2 L 78.5 65.4 L 74 65.4 L 74 30.3 L 84.2 30.3 C 86.4 30.3 88.2 30.6 89.6 31.3 C 91.1 32 92.2 32.8 93.1 33.9 C 94 35 94.6 36.1 95 37.3 C 95.4 38.5 95.5 39.7 95.5 40.8 C 95.5 43.3 94.9 45.4 93.6 47 C 92.3 48.6 90.5 49.8 88.2 50.6 L 97.5 65.4 Z M 83.81 47.191 C 86.21 47.191 88 46.7 89.2 45.6 C 90.4 44.4 91 42.9 91 40.8 C 91 38.8 90.4 37.2 89.2 36 C 88 34.8 86.3 34.2 84.1 34.2 L 78.6 34.2 L 78.6 47.2 L 83.8 47.2 L 83.81 47.191 Z" style="fill: rgb(0, 0, 0);"></path> </g> <g style transform="matrix(5.538847, 0, 0, 5.68973, -136.858704, -157.860214)"> <path class=st1 d=M46.2,109.9h-14V85.3h3.2V107h10.7V109.9z style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M51.5,88.8c-0.6,0-1.1-0.2-1.5-0.6c-0.4-0.4-0.5-0.9-0.5-1.5c0-0.6,0.2-1.1,0.5-1.5c0.4-0.4,0.9-0.6,1.5-0.6 s1.1,0.2,1.5,0.6c0.4,0.4,0.5,0.9,0.5,1.5s-0.2,1.1-0.5,1.5C52.6,88.6,52.1,88.8,51.5,88.8z M53.1,109.9H50V92.4h3.1V109.9z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M73,109.9h-3.1V99.1c0-0.9-0.1-1.6-0.3-2.2c-0.2-0.6-0.4-1-0.8-1.4c-0.3-0.3-0.7-0.6-1.2-0.7s-0.9-0.2-1.4-0.2 c-0.9,0-1.7,0.2-2.3,0.5c-0.6,0.4-1.2,0.9-1.6,1.5c-0.4,0.6-0.7,1.3-0.9,2.1c-0.2,0.8-0.3,1.6-0.3,2.5v8.6h-3.1V92.4H61l0.1,2.4 c0.1-0.3,0.4-0.6,0.7-0.9c0.3-0.3,0.7-0.7,1.2-0.9c0.5-0.3,1-0.5,1.7-0.7s1.4-0.3,2.2-0.3c2,0,3.6,0.6,4.6,1.7s1.6,2.8,1.6,4.8 V109.9z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M92.7,109.9h-2.9l-0.1-2.3c-0.1,0.3-0.4,0.6-0.7,0.9c-0.3,0.3-0.7,0.6-1.2,0.9c-0.5,0.3-1,0.5-1.7,0.7 c-0.6,0.2-1.4,0.3-2.2,0.3c-2,0-3.6-0.6-4.6-1.7c-1.1-1.2-1.6-2.8-1.6-4.8V92.4H81v11c0,0.8,0.1,1.5,0.3,2.1c0.2,0.5,0.4,1,0.7,1.3 c0.3,0.3,0.7,0.6,1.1,0.7c0.4,0.1,0.9,0.2,1.5,0.2c0.9,0,1.7-0.2,2.3-0.5c0.6-0.4,1.2-0.9,1.6-1.5s0.7-1.3,0.9-2.1 c0.2-0.8,0.3-1.6,0.3-2.5v-8.6h3.1V109.9z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d=M112,109.9h-3.7l-4.6-6.7l-4.6,6.7h-3.3l6.3-9l-5.9-8.5h3.7l4,5.8l4-5.8h3.3l-5.7,8.2L112,109.9z style="fill: rgb(0, 0, 0);"></path> </g> </svg> </a> Learn SR Linux </label> <div class=md-nav__source> <a class=md-source data-md-component=source href=https://github.com/srl-labs/learn-srlinux title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </div> <div class=md-source__repository> srl-labs/learn-srlinux </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../..> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../get-started/ class=md-nav__link> <span class=md-ellipsis> Get Started </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../mgmt/ class=md-nav__link> <span class=md-ellipsis> Management </span> </a> </div> <nav aria-expanded=false aria-labelledby=__nav_3_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Management </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../programmability/ class=md-nav__link> <span class=md-ellipsis> Programmability </span> </a> <label class=md-nav__link for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_4_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Programmability </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_2 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../yang/ class=md-nav__link> <span class=md-ellipsis> YANG </span> </a> <label class=md-nav__link for=__nav_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_4_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> YANG </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../yang/browser/ class=md-nav__link> <span class=md-ellipsis> YANG Browser </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_3 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../ndk/ class=md-nav__link> <span class=md-ellipsis> NDK </span> </a> <label class=md-nav__link for=__nav_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_4_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> NDK </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_3_2 type=checkbox> <label class=md-nav__link for=__nav_4_3_2 id=__nav_4_3_2_label tabindex=0> <span class=md-ellipsis> Developers Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_3_2_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_4_3_2> <span class="md-nav__icon md-icon"></span> Developers Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ndk/guide/architecture/ class=md-nav__link> <span class=md-ellipsis> NDK Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/guide/agent/ class=md-nav__link> <span class=md-ellipsis> Agent Structure </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/guide/agent-install-and-ops/ class=md-nav__link> <span class=md-ellipsis> Agent Installation &amp; Operations </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_3_2_4 type=checkbox> <label class=md-nav__link for=__nav_4_3_2_4 id=__nav_4_3_2_4_label tabindex=0> <span class=md-ellipsis> Environment Setup </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_3_2_4_label class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_4> <span class="md-nav__icon md-icon"></span> Environment Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ndk/guide/env/go/ class=md-nav__link> <span class=md-ellipsis> Go </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/guide/env/python/ class=md-nav__link> <span class=md-ellipsis> Python </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_3_2_5 type=checkbox> <label class=md-nav__link for=__nav_4_3_2_5 id=__nav_4_3_2_5_label tabindex=0> <span class=md-ellipsis> Developing with NDK </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_3_2_5_label class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_5> <span class="md-nav__icon md-icon"></span> Developing with NDK </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ndk/guide/dev/go/ class=md-nav__link> <span class=md-ellipsis> Go </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/guide/dev/python/ class=md-nav__link> <span class=md-ellipsis> Python </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_3_3 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../ndk/apps/ class=md-nav__link> <span class=md-ellipsis> App Catalog </span> </a> <label class=md-nav__link for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_4_3_3_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> App Catalog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ndk/apps/evpn-proxy/ class=md-nav__link> <span class=md-ellipsis> EVPN Proxy </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/apps/kbutler/ class=md-nav__link> <span class=md-ellipsis> kButler </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/apps/srl-prom-exporter/ class=md-nav__link> <span class=md-ellipsis> Prometheus Telemetry Exporter </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/apps/satellite/ class=md-nav__link> <span class=md-ellipsis> Satellite Tracker </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_5 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../ class=md-nav__link> <span class=md-ellipsis> Tutorials </span> </a> <label class=md-nav__link for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=true aria-labelledby=__nav_5_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_5_2 type=checkbox> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> EVPN </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=true aria-labelledby=__nav_5_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> EVPN </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_5_2_1 type=checkbox> <label class=md-nav__link for=__nav_5_2_1 id=__nav_5_2_1_label tabindex=0> <span class=md-ellipsis> Layer 2 EVPN </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=true aria-labelledby=__nav_5_2_1_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_2_1> <span class="md-nav__icon md-icon"></span> Layer 2 EVPN </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../intro/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Fabric configuration </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Fabric configuration </span> </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#leaf-spine-interfaces> <span class=md-ellipsis> Leaf-Spine interfaces </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ebgp> <span class=md-ellipsis> EBGP </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#loopbacks> <span class=md-ellipsis> Loopbacks </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#verification> <span class=md-ellipsis> Verification </span> </a> <nav aria-label=Verification class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#bgp-status> <span class=md-ellipsis> BGP status </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#bgp-neighbor-status> <span class=md-ellipsis> BGP neighbor status </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#receivedadvertised-routes> <span class=md-ellipsis> Received/Advertised routes </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#route-table> <span class=md-ellipsis> Route table </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#dataplane> <span class=md-ellipsis> Dataplane </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#resulting-configs> <span class=md-ellipsis> Resulting configs </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../evpn/ class=md-nav__link> <span class=md-ellipsis> EVPN configuration </span> </a> </li> <li class=md-nav__item> <a href=../summary/ class=md-nav__link> <span class=md-ellipsis> Summary </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_3 type=checkbox> <label class=md-nav__link for=__nav_5_3 id=__nav_5_3_label tabindex=0> <span class=md-ellipsis> Infrastructure </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_3_1 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../infrastructure/kne/ class=md-nav__link> <span class=md-ellipsis> KNE </span> </a> <label class=md-nav__link for=__nav_5_3_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_5_3_1_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_3_1> <span class="md-nav__icon md-icon"></span> KNE </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../infrastructure/kne/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../infrastructure/kne/topology/ class=md-nav__link> <span class=md-ellipsis> Topology </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_3_1_4 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../infrastructure/kne/srl-with-oc-services/ class=md-nav__link> <span class=md-ellipsis> SR Linux with Openconfig services </span> </a> </div> <nav aria-expanded=false aria-labelledby=__nav_5_3_1_4_label class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_5_3_1_4> <span class="md-nav__icon md-icon"></span> SR Linux with Openconfig services </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_4 type=checkbox> <label class=md-nav__link for=__nav_5_4 id=__nav_5_4_label tabindex=0> <span class=md-ellipsis> MPLS </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_4_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> MPLS </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_4_1 type=checkbox> <label class=md-nav__link for=__nav_5_4_1 id=__nav_5_4_1_label tabindex=0> <span class=md-ellipsis> LDP-based MPLS </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_4_1_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_4_1> <span class="md-nav__icon md-icon"></span> LDP-based MPLS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../mpls/mpls-ldp/intro/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../mpls/mpls-ldp/routing/ class=md-nav__link> <span class=md-ellipsis> Routing </span> </a> </li> <li class=md-nav__item> <a href=../../mpls/mpls-ldp/ldp/ class=md-nav__link> <span class=md-ellipsis> LDP </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_5 type=checkbox> <label class=md-nav__link for=__nav_5_5 id=__nav_5_5_label tabindex=0> <span class=md-ellipsis> Programmability </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_5_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> Programmability </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_5_1 type=checkbox> <label class=md-nav__link for=__nav_5_5_1 id=__nav_5_5_1_label tabindex=0> <span class=md-ellipsis> Event Handler </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_5_1_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_5_1> <span class="md-nav__icon md-icon"></span> Event Handler </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_5_1_1 type=checkbox> <label class=md-nav__link for=__nav_5_5_1_1 id=__nav_5_5_1_1_label tabindex=0> <span class=md-ellipsis> Oper Group </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_5_1_1_label class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_5_5_1_1> <span class="md-nav__icon md-icon"></span> Oper Group </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/oper-group-intro/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/lab/ class=md-nav__link> <span class=md-ellipsis> Lab setup </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/problem-statement/ class=md-nav__link> <span class=md-ellipsis> Problem statement </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/oper-group-cfg/ class=md-nav__link> <span class=md-ellipsis> Configuring oper-group </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/script/ class=md-nav__link> <span class=md-ellipsis> Script </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/opergroup-operation/ class=md-nav__link> <span class=md-ellipsis> Oper group in action </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/summary/ class=md-nav__link> <span class=md-ellipsis> Summary </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_5_2 type=checkbox> <label class=md-nav__link for=__nav_5_5_2 id=__nav_5_5_2_label tabindex=0> <span class=md-ellipsis> JSON-RPC </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_5_2_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_5_2> <span class="md-nav__icon md-icon"></span> JSON-RPC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../programmability/json-rpc/basics/ class=md-nav__link> <span class=md-ellipsis> Basics </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/json-rpc/ansible/ class=md-nav__link> <span class=md-ellipsis> Ansible </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../community/ class=md-nav__link> <span class=md-ellipsis> Community </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_7 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../blog/ class=md-nav__link> <span class=md-ellipsis> Blog </span> </a> <label class=md-nav__link for=__nav_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_7_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../blog/subscribe/ class=md-nav__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19 7.38 20 6.18 20 5 20 4 19 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1Z"></path></svg> <span class=md-ellipsis> Subscribe </span> </a> </li> <li class=md-nav__item> <a href=../../../blog/tags/ class=md-nav__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M5.5 7A1.5 1.5 0 0 1 4 5.5 1.5 1.5 0 0 1 5.5 4 1.5 1.5 0 0 1 7 5.5 1.5 1.5 0 0 1 5.5 7m15.91 4.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.11 0-2 .89-2 2v7c0 .55.22 1.05.59 1.41l8.99 9c.37.36.87.59 1.42.59.55 0 1.05-.23 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.56-.23-1.06-.59-1.42Z"></path></svg> <span class=md-ellipsis> Tags </span> </a> </li> <li class=md-nav__item> <a href=../../../blog/media/ class=md-nav__link> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M319.4 372c48.5-31.3 80.6-85.9 80.6-148 0-97.2-78.8-176-176-176S48 126.8 48 224c0 62.1 32.1 116.6 80.6 148 1.2 17.3 4 38 7.2 57.1l.2 1C56 395.8 0 316.5 0 224 0 100.3 100.3 0 224 0s224 100.3 224 224c0 92.5-56 171.9-136 206.1l.2-1.1c3.1-19.2 6-39.8 7.2-57zm-2.3-38.1c-1.6-5.7-3.9-11.1-7-16.2-5.8-9.7-13.5-17-21.9-22.4 19.5-17.6 31.8-43 31.8-71.3 0-53-43-96-96-96s-96 43-96 96c0 28.3 12.3 53.8 31.8 71.3-8.4 5.4-16.1 12.7-21.9 22.4-3.1 5.1-5.4 10.5-7 16.2C99.8 307.5 80 268 80 224c0-79.5 64.5-144 144-144s144 64.5 144 144c0 44-19.8 83.5-50.9 109.9zM224 312c32.9 0 64 8.6 64 43.8 0 33-12.9 104.1-20.6 132.9-5.1 19-24.5 23.4-43.4 23.4s-38.2-4.4-43.4-23.4C172.8 460.2 160 389 160 355.9c0-35.1 31.1-43.8 64-43.8zm0-32c-30.9 0-56-25.1-56-56s25.1-56 56-56 56 25.1 56 56-25.1 56-56 56z"></path></svg> <span class=md-ellipsis> In the Media </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#leaf-spine-interfaces> <span class=md-ellipsis> Leaf-Spine interfaces </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ebgp> <span class=md-ellipsis> EBGP </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#loopbacks> <span class=md-ellipsis> Loopbacks </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#verification> <span class=md-ellipsis> Verification </span> </a> <nav aria-label=Verification class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#bgp-status> <span class=md-ellipsis> BGP status </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#bgp-neighbor-status> <span class=md-ellipsis> BGP neighbor status </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#receivedadvertised-routes> <span class=md-ellipsis> Received/Advertised routes </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#route-table> <span class=md-ellipsis> Route table </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#dataplane> <span class=md-ellipsis> Dataplane </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#resulting-configs> <span class=md-ellipsis> Resulting configs </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a class="md-content__button md-icon" href=https://github.com/srl-labs/learn-srlinux/edit/main/docs/tutorials/l2evpn/fabric.md title="Edit this page"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"></path></svg> </a> <h1>Fabric configuration</h1> <script async src=https://cdn.jsdelivr.net/gh/hellt/drawio-js@main/embed2.js type=text/javascript></script> <p>Prior to configuring EVPN based overlay, a routing protocol needs to be deployed in the fabric to advertise the reachability of all the leaf VXLAN Termination End Point (VTEP) addresses throughout the IP fabric.</p> <p>With SR Linux, the following routing protocols can be used in the underlay:</p> <ul> <li>ISIS</li> <li>OSPF</li> <li>EBGP</li> </ul> <p>We will use a BGP based fabric design as described in <a href=https://tools.ietf.org/html/rfc7938>RFC7938</a> due to its simplicity, scalability, and ease of multi-vendor interoperability.</p> <h2 id=leaf-spine-interfaces>Leaf-Spine interfaces<a class=headerlink href=#leaf-spine-interfaces title="Permanent link">#</a></h2> <p>Let's start with configuring the IP interfaces on the inter-switch links to ensure L3 connectivity is established. According to our lab topology configuration, and using the <code>192.168.xx.0/30</code> network to address the links, we will implement the following underlay addressing design:</p> <div class=mxgraph data-mxgraph='{"page":2,"zoom":2,"highlight":"#0000ff","nav":true,"check-visible-state":true,"resize":true,"url":"https://raw.githubusercontent.com/srl-labs/learn-srlinux/diagrams/quickstart.drawio"}' style="max-width:100%;border:1px solid transparent;margin:0 auto; display:block;"></div> <p>On each leaf and spine we will bring up the relevant <a href=../../../kb/ifaces/ >interface</a> and address its routed <a href=../../../kb/ifaces/#subinterfaces>subinterface</a> to achieve L3 connectivity.</p> <p>We begin with connecting to the CLI of our nodes via SSH<sup id=fnref:1><a class=footnote-ref href=#fn:1>1</a></sup>:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-0-1><a href=#__codelineno-0-1 id=__codelineno-0-1 name=__codelineno-0-1></a><span class=c1># connecting to leaf1</span>
</span><span id=__span-0-2><a href=#__codelineno-0-2 id=__codelineno-0-2 name=__codelineno-0-2></a>ssh<span class=w> </span>admin@clab-evpn01-leaf1
</span></code></pre></div> <p>Then on each node we enter into <a href=../../../kb/cfgmgmt/#configuration-modes>candidate configuration mode</a> and proceed with the relevant interfaces configuration.</p> <p>Let's witness the step by step process of an interface configuration on a <code>leaf1</code> switch with providing the paste-ables snippets for the rest of the nodes</p> <ol> <li> <p>Enter the <code>candidate</code> configuration mode to make edits to the configuration</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-1-1><a href=#__codelineno-1-1 id=__codelineno-1-1 name=__codelineno-1-1></a><span class=err>Welcome to the srlinux CLI.</span>
</span><span id=__span-1-2><a href=#__codelineno-1-2 id=__codelineno-1-2 name=__codelineno-1-2></a><span class=err>Type 'help' (and press &lt;</span><span class=kr>ENTER</span><span class=err>&gt;) if you need any help using this.</span>
</span><span id=__span-1-3><a href=#__codelineno-1-3 id=__codelineno-1-3 name=__codelineno-1-3></a>
</span><span id=__span-1-4><a href=#__codelineno-1-4 id=__codelineno-1-4 name=__codelineno-1-4></a>
</span><span id=__span-1-5><a href=#__codelineno-1-5 id=__codelineno-1-5 name=__codelineno-1-5></a><span class=c>--{ running }--[  ]--</span>
</span><span id=__span-1-6><a href=#__codelineno-1-6 id=__codelineno-1-6 name=__codelineno-1-6></a>A:leaf1# <span class=n>enter candidate</span>
</span></code></pre></div> </li> <li> <p>The prompt will indicate the changed active mode</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-2-1><a href=#__codelineno-2-1 id=__codelineno-2-1 name=__codelineno-2-1></a><span class=c>--{ candidate shared default }--[  ]--</span>
</span><span id=__span-2-2><a href=#__codelineno-2-2 id=__codelineno-2-2 name=__codelineno-2-2></a>A:leaf1#                             <span class=n> </span>
</span></code></pre></div> </li> <li> <p>Enter into the interface configuration context</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-3-1><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a><span class=c>--{ candidate shared default }--[  ]--</span>
</span><span id=__span-3-2><a href=#__codelineno-3-2 id=__codelineno-3-2 name=__codelineno-3-2></a>A:leaf1# <span class=n>interface ethernet-1/49      </span>
</span></code></pre></div> </li> <li> <p>Create a subinterface under the parent interface to configure IPv4 address on it</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-4-1><a href=#__codelineno-4-1 id=__codelineno-4-1 name=__codelineno-4-1></a><span class=c>--{ * candidate shared default }--[ interface ethernet-1/49 ]--</span>
</span><span id=__span-4-2><a href=#__codelineno-4-2 id=__codelineno-4-2 name=__codelineno-4-2></a>A:leaf1# <span class=n>subinterface 0                                        </span>
</span><span id=__span-4-3><a href=#__codelineno-4-3 id=__codelineno-4-3 name=__codelineno-4-3></a><span class=c>--{ * candidate shared default }--[ interface ethernet-1/49 subinterface 0 ]--</span>
</span><span id=__span-4-4><a href=#__codelineno-4-4 id=__codelineno-4-4 name=__codelineno-4-4></a>A:leaf1# <span class=n>ipv4 address 192.168.11.1/30                                         </span>
</span></code></pre></div> </li> <li> <p>Apply the configuration changes by issuing a <code>commit now</code> command. The changes will be written to the running configuration.</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-5-1><a href=#__codelineno-5-1 id=__codelineno-5-1 name=__codelineno-5-1></a><span class=c>--{ * candidate shared default }--[ interface ethernet-1/49 subinterface 0 ipv4 address 192.168.11.1/30 ]--</span>
</span><span id=__span-5-2><a href=#__codelineno-5-2 id=__codelineno-5-2 name=__codelineno-5-2></a>A:leaf1# <span class=n>commit now                                                                                        </span>
</span><span id=__span-5-3><a href=#__codelineno-5-3 id=__codelineno-5-3 name=__codelineno-5-3></a><span class=err>All changes have been committed. Leaving candidate mode.</span>
</span></code></pre></div> </li> </ol> <p>Below you will find the relevant configuration snippets<sup id=fnref:2><a class=footnote-ref href=#fn:2>2</a></sup> for leafs and spine of our fabric which you can paste in the terminal while being in candidate mode.</p> <div class="tabbed-set tabbed-alternate" data-tabs=1:3><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><input id=__tabbed_1_3 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>leaf1</label><label for=__tabbed_1_2>leaf2</label><label for=__tabbed_1_3>spine1</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-6-1><a href=#__codelineno-6-1 id=__codelineno-6-1 name=__codelineno-6-1></a><span class=err>interface </span><span class=no>ethernet-1/49</span><span class=err> {</span>
</span><span id=__span-6-2><a href=#__codelineno-6-2 id=__codelineno-6-2 name=__codelineno-6-2></a><span class=err>    subinterface</span> <span class=no>0</span> <span class=err>{</span>
</span><span id=__span-6-3><a href=#__codelineno-6-3 id=__codelineno-6-3 name=__codelineno-6-3></a><span class=err>        ipv4 {</span>
</span><span id=__span-6-4><a href=#__codelineno-6-4 id=__codelineno-6-4 name=__codelineno-6-4></a><span class=err>            address </span><span class=no>192.168.11.1/30 </span><span class=err>{</span>
</span><span id=__span-6-5><a href=#__codelineno-6-5 id=__codelineno-6-5 name=__codelineno-6-5></a><span class=err>            }</span>
</span><span id=__span-6-6><a href=#__codelineno-6-6 id=__codelineno-6-6 name=__codelineno-6-6></a><span class=err>        }</span>
</span><span id=__span-6-7><a href=#__codelineno-6-7 id=__codelineno-6-7 name=__codelineno-6-7></a><span class=err>    }</span>
</span><span id=__span-6-8><a href=#__codelineno-6-8 id=__codelineno-6-8 name=__codelineno-6-8></a><span class=err>}</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-7-1><a href=#__codelineno-7-1 id=__codelineno-7-1 name=__codelineno-7-1></a><span class=err>interface </span><span class=no>ethernet-1/49</span><span class=err> {</span>
</span><span id=__span-7-2><a href=#__codelineno-7-2 id=__codelineno-7-2 name=__codelineno-7-2></a><span class=err>    subinterface</span> <span class=no>0</span> <span class=err>{</span>
</span><span id=__span-7-3><a href=#__codelineno-7-3 id=__codelineno-7-3 name=__codelineno-7-3></a><span class=err>        ipv4 {</span>
</span><span id=__span-7-4><a href=#__codelineno-7-4 id=__codelineno-7-4 name=__codelineno-7-4></a><span class=err>            address </span><span class=no>192.168.12.1/30 </span><span class=err>{</span>
</span><span id=__span-7-5><a href=#__codelineno-7-5 id=__codelineno-7-5 name=__codelineno-7-5></a><span class=err>            }</span>
</span><span id=__span-7-6><a href=#__codelineno-7-6 id=__codelineno-7-6 name=__codelineno-7-6></a><span class=err>        }</span>
</span><span id=__span-7-7><a href=#__codelineno-7-7 id=__codelineno-7-7 name=__codelineno-7-7></a><span class=err>    }</span>
</span><span id=__span-7-8><a href=#__codelineno-7-8 id=__codelineno-7-8 name=__codelineno-7-8></a><span class=err>}</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-8-1><a href=#__codelineno-8-1 id=__codelineno-8-1 name=__codelineno-8-1></a><span class=err>interface </span><span class=no>ethernet-1/1</span><span class=err> {</span>
</span><span id=__span-8-2><a href=#__codelineno-8-2 id=__codelineno-8-2 name=__codelineno-8-2></a><span class=err>    subinterface</span> <span class=no>0</span> <span class=err>{</span>
</span><span id=__span-8-3><a href=#__codelineno-8-3 id=__codelineno-8-3 name=__codelineno-8-3></a><span class=err>        ipv4 {</span>
</span><span id=__span-8-4><a href=#__codelineno-8-4 id=__codelineno-8-4 name=__codelineno-8-4></a><span class=err>            address </span><span class=no>192.168.11.2/30 </span><span class=err>{</span>
</span><span id=__span-8-5><a href=#__codelineno-8-5 id=__codelineno-8-5 name=__codelineno-8-5></a><span class=err>            }</span>
</span><span id=__span-8-6><a href=#__codelineno-8-6 id=__codelineno-8-6 name=__codelineno-8-6></a><span class=err>        }</span>
</span><span id=__span-8-7><a href=#__codelineno-8-7 id=__codelineno-8-7 name=__codelineno-8-7></a><span class=err>    }</span>
</span><span id=__span-8-8><a href=#__codelineno-8-8 id=__codelineno-8-8 name=__codelineno-8-8></a><span class=err>}</span>
</span><span id=__span-8-9><a href=#__codelineno-8-9 id=__codelineno-8-9 name=__codelineno-8-9></a><span class=err>interface </span><span class=no>ethernet-1/2</span><span class=err> {</span>
</span><span id=__span-8-10><a href=#__codelineno-8-10 id=__codelineno-8-10 name=__codelineno-8-10></a><span class=err>    subinterface</span> <span class=no>0</span> <span class=err>{</span>
</span><span id=__span-8-11><a href=#__codelineno-8-11 id=__codelineno-8-11 name=__codelineno-8-11></a><span class=err>        ipv4 {</span>
</span><span id=__span-8-12><a href=#__codelineno-8-12 id=__codelineno-8-12 name=__codelineno-8-12></a><span class=err>            address </span><span class=no>192.168.12.2/30 </span><span class=err>{</span>
</span><span id=__span-8-13><a href=#__codelineno-8-13 id=__codelineno-8-13 name=__codelineno-8-13></a><span class=err>            }</span>
</span><span id=__span-8-14><a href=#__codelineno-8-14 id=__codelineno-8-14 name=__codelineno-8-14></a><span class=err>        }</span>
</span><span id=__span-8-15><a href=#__codelineno-8-15 id=__codelineno-8-15 name=__codelineno-8-15></a><span class=err>    }</span>
</span><span id=__span-8-16><a href=#__codelineno-8-16 id=__codelineno-8-16 name=__codelineno-8-16></a><span class=err>}</span>
</span></code></pre></div> </div> </div> </div> <p>Once those snippets are committed to the running configuration with <code>commit now</code> command, we can ensure that the changes have been applied by showing the interface status:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-9-1><a href=#__codelineno-9-1 id=__codelineno-9-1 name=__codelineno-9-1></a><span class=err>--{ + running }--[  ]--                             </span>
</span><span id=__span-9-2><a href=#__codelineno-9-2 id=__codelineno-9-2 name=__codelineno-9-2></a>A:spine1# <span class=n>show interface ethernet-1/1               </span>
</span><span id=__span-9-3><a href=#__codelineno-9-3 id=__codelineno-9-3 name=__codelineno-9-3></a><span class=err>====================================================</span>
</span><span id=__span-9-4><a href=#__codelineno-9-4 id=__codelineno-9-4 name=__codelineno-9-4></a><span class=no>ethernet-1/1</span><span class=err> is </span><span class=l>up</span><span class=err>, speed 10G, type None</span>
</span><span id=__span-9-5><a href=#__codelineno-9-5 id=__codelineno-9-5 name=__codelineno-9-5></a><span class=err>  </span><span class=no>ethernet-1/1.0</span><span class=err> is </span><span class=l>up</span>
</span><span id=__span-9-6><a href=#__codelineno-9-6 id=__codelineno-9-6 name=__codelineno-9-6></a><span class=err>    Network-instance: </span>
</span><span id=__span-9-7><a href=#__codelineno-9-7 id=__codelineno-9-7 name=__codelineno-9-7></a><span class=err>    Encapsulation   : null</span>
</span><span id=__span-9-8><a href=#__codelineno-9-8 id=__codelineno-9-8 name=__codelineno-9-8></a><span class=err>    Type            : routed</span>
</span><span id=__span-9-9><a href=#__codelineno-9-9 id=__codelineno-9-9 name=__codelineno-9-9></a><span class=err>    IPv4 addr    : </span><span class=no>192.168.11.2/30 </span><span class=err>(static, None)</span>
</span><span id=__span-9-10><a href=#__codelineno-9-10 id=__codelineno-9-10 name=__codelineno-9-10></a><span class=c>----------------------------------------------------</span>
</span><span id=__span-9-11><a href=#__codelineno-9-11 id=__codelineno-9-11 name=__codelineno-9-11></a><span class=err>====================================================</span>
</span></code></pre></div> <p>At this moment, the configured interfaces can not be used as they are not yet associated with any <a href=../../../kb/netwinstance/ >network instance</a>. Below we are placing the interfaces to the network-instance <code>default</code> that is created automatically by SR Linux.</p> <div class="tabbed-set tabbed-alternate" data-tabs=2:2><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><input id=__tabbed_2_2 name=__tabbed_2 type=radio><div class=tabbed-labels><label for=__tabbed_2_1>leaf1 &amp; leaf2</label><label for=__tabbed_2_2>spine1</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-10-1><a href=#__codelineno-10-1 id=__codelineno-10-1 name=__codelineno-10-1></a><span class=c>--{ + candidate shared default }--[  ]--</span>
</span><span id=__span-10-2><a href=#__codelineno-10-2 id=__codelineno-10-2 name=__codelineno-10-2></a>A:leaf1# <span class=n>network-instance default interface ethernet-1/49.0</span>
</span><span id=__span-10-3><a href=#__codelineno-10-3 id=__codelineno-10-3 name=__codelineno-10-3></a>
</span><span id=__span-10-4><a href=#__codelineno-10-4 id=__codelineno-10-4 name=__codelineno-10-4></a><span class=c>--{ +* candidate shared default }--[ network-instance default interface ethernet-1/49.0 ]--</span>
</span><span id=__span-10-5><a href=#__codelineno-10-5 id=__codelineno-10-5 name=__codelineno-10-5></a>A:leaf1# <span class=n>commit now                                                                        </span>
</span><span id=__span-10-6><a href=#__codelineno-10-6 id=__codelineno-10-6 name=__codelineno-10-6></a><span class=err>All changes have been committed. Leaving candidate mode.</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-11-1><a href=#__codelineno-11-1 id=__codelineno-11-1 name=__codelineno-11-1></a><span class=c>--{ + candidate shared default }--[  ]--</span>
</span><span id=__span-11-2><a href=#__codelineno-11-2 id=__codelineno-11-2 name=__codelineno-11-2></a>A:spine1# <span class=n>network-instance default interface ethernet-1/1.0</span>
</span><span id=__span-11-3><a href=#__codelineno-11-3 id=__codelineno-11-3 name=__codelineno-11-3></a>
</span><span id=__span-11-4><a href=#__codelineno-11-4 id=__codelineno-11-4 name=__codelineno-11-4></a><span class=c>--{ +* candidate shared default }--[ network-instance default interface ethernet-1/1.0 ]--</span>
</span><span id=__span-11-5><a href=#__codelineno-11-5 id=__codelineno-11-5 name=__codelineno-11-5></a>A:spine1# <span class=n>/network-instance default interface ethernet-1/2.0                              </span>
</span><span id=__span-11-6><a href=#__codelineno-11-6 id=__codelineno-11-6 name=__codelineno-11-6></a>
</span><span id=__span-11-7><a href=#__codelineno-11-7 id=__codelineno-11-7 name=__codelineno-11-7></a><span class=c>--{ +* candidate shared default }--[ network-instance default interface ethernet-1/2.0 ]--</span>
</span><span id=__span-11-8><a href=#__codelineno-11-8 id=__codelineno-11-8 name=__codelineno-11-8></a>A:spine2# <span class=n>commit now                                                                      </span>
</span><span id=__span-11-9><a href=#__codelineno-11-9 id=__codelineno-11-9 name=__codelineno-11-9></a><span class=err>All changes have been committed. Leaving candidate mode.</span>
</span></code></pre></div> </div> </div> </div> <p>When interfaces are owned by the network-instance <code>default</code>, we can ensure that the basic IP connectivity is working by issuing a ping between the pair of interfaces. For example from <code>spine1</code> to <code>leaf2</code>:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-12-1><a href=#__codelineno-12-1 id=__codelineno-12-1 name=__codelineno-12-1></a>--{ + running }--[  ]--                                     
</span><span id=__span-12-2><a href=#__codelineno-12-2 id=__codelineno-12-2 name=__codelineno-12-2></a>A:spine1# ping 192.168.12.1 network-instance default        
</span><span id=__span-12-3><a href=#__codelineno-12-3 id=__codelineno-12-3 name=__codelineno-12-3></a>Using network instance default
</span><span id=__span-12-4><a href=#__codelineno-12-4 id=__codelineno-12-4 name=__codelineno-12-4></a>PING 192.168.12.1 (192.168.12.1) 56(84) bytes of data.
</span><span id=__span-12-5><a href=#__codelineno-12-5 id=__codelineno-12-5 name=__codelineno-12-5></a>64 bytes from 192.168.12.1: icmp_seq=1 ttl=64 time=31.4 ms
</span><span id=__span-12-6><a href=#__codelineno-12-6 id=__codelineno-12-6 name=__codelineno-12-6></a>64 bytes from 192.168.12.1: icmp_seq=2 ttl=64 time=10.0 ms
</span><span id=__span-12-7><a href=#__codelineno-12-7 id=__codelineno-12-7 name=__codelineno-12-7></a>64 bytes from 192.168.12.1: icmp_seq=3 ttl=64 time=13.1 ms
</span><span id=__span-12-8><a href=#__codelineno-12-8 id=__codelineno-12-8 name=__codelineno-12-8></a>64 bytes from 192.168.12.1: icmp_seq=4 ttl=64 time=16.5 ms
</span><span id=__span-12-9><a href=#__codelineno-12-9 id=__codelineno-12-9 name=__codelineno-12-9></a>^C
</span><span id=__span-12-10><a href=#__codelineno-12-10 id=__codelineno-12-10 name=__codelineno-12-10></a>--- 192.168.12.1 ping statistics ---
</span><span id=__span-12-11><a href=#__codelineno-12-11 id=__codelineno-12-11 name=__codelineno-12-11></a>4 packets transmitted, 4 received, 0% packet loss, time 3003ms
</span><span id=__span-12-12><a href=#__codelineno-12-12 id=__codelineno-12-12 name=__codelineno-12-12></a>rtt min/avg/max/mdev = 10.034/17.786/31.409/8.199 ms
</span></code></pre></div> <h2 id=ebgp>EBGP<a class=headerlink href=#ebgp title="Permanent link">#</a></h2> <p>Since in this exercise the design decision was to use BGP in the data center, we need to configure BGP peering between the leaf-spine pairs. For that purpose we will use EBGP protocol.</p> <p>The EBGP will make sure of advertising the VTEP IP addresses (loopbacks) across the fabric. The VXLAN VTEPs themselves will be configured later, in this step we will take care of adding the EBGP peering.</p> <p>Let's turn this diagram with the ASN/Router ID allocation into a working configuration:</p> <div class=mxgraph data-mxgraph='{"page":3,"zoom":2,"highlight":"#0000ff","nav":true,"check-visible-state":true,"resize":true,"url":"https://raw.githubusercontent.com/srl-labs/learn-srlinux/diagrams/quickstart.drawio"}' style="max-width:100%;border:1px solid transparent;margin:0 auto; display:block;"></div> <p>Here is a breakdown of the steps that are needed to configure EBGP on <code>leaf1</code> towards <code>spine1</code>:</p> <ol> <li> <p><strong>Add BGP protocol to network-instance</strong><br> Routing protocols are configured under a network-instance context. By adding BGP protocol to the default network-instance we implicitly enable this protocol. </p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-13-1><a href=#__codelineno-13-1 id=__codelineno-13-1 name=__codelineno-13-1></a><span class=err>--{ + candidate shared default }--[  ]--       </span>
</span><span id=__span-13-2><a href=#__codelineno-13-2 id=__codelineno-13-2 name=__codelineno-13-2></a>A:leaf1# <span class=n>network-instance default protocols bgp</span>
</span></code></pre></div> </li> <li> <p><strong>Assign Autonomous System Number</strong><br> The ASN is reported to peers when BGP speaker opens a session towards another router.<br> According to the diagram above, <code>leaf1</code> has ASN 101. </p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-14-1><a href=#__codelineno-14-1 id=__codelineno-14-1 name=__codelineno-14-1></a><span class=c>--{ +* candidate shared default }--[ network-instance default protocols bgp ]--</span>
</span><span id=__span-14-2><a href=#__codelineno-14-2 id=__codelineno-14-2 name=__codelineno-14-2></a>A:leaf1# <span class=n>autonomous-system 101</span>
</span></code></pre></div> </li> <li> <p><strong>Assign Router ID</strong><br> This is the BGP identifier reported to peers when this network-instance opens a BGP session towards another router.<br> Leaf1 has a router-id of 10.0.0.1.</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-15-1><a href=#__codelineno-15-1 id=__codelineno-15-1 name=__codelineno-15-1></a><span class=c>--{ +* candidate shared default }--[ network-instance default protocols bgp ]--</span>
</span><span id=__span-15-2><a href=#__codelineno-15-2 id=__codelineno-15-2 name=__codelineno-15-2></a>A:leaf1# <span class=n>router-id 10.0.0.1</span>
</span></code></pre></div> </li> <li> <p><strong>Enable AF</strong><br> Enable all address families that should be enabled globally as a default for all peers of the BGP instance.<br> When you later configure individual neighbors or groups, you can override the enabled families at those levels.<br> For the sake of IPv4 loopbacks advertisement, we only need to enable <code>ipv4-unicast</code> address family:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-16-1><a href=#__codelineno-16-1 id=__codelineno-16-1 name=__codelineno-16-1></a><span class=c>--{ +* candidate shared default }--[ network-instance default protocols bgp ]--</span>
</span><span id=__span-16-2><a href=#__codelineno-16-2 id=__codelineno-16-2 name=__codelineno-16-2></a>A:leaf1# <span class=n>ipv4-unicast admin-state enable</span>
</span></code></pre></div> </li> <li> <p><strong>Create export/import policies</strong><br> The export/import policy is required for an EBGP peer to advertise and install routes.<br> The policy named <code>all</code> that we create below will be used both as an import and export policy, effectively allowing all routes to be advertised and received<sup id=fnref:4><a class=footnote-ref href=#fn:4>4</a></sup>. </p> <p>The routing policies are configured at <code>/routing-policy</code> context, so first, we switch to it from the current <code>bgp</code> context:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-17-1><a href=#__codelineno-17-1 id=__codelineno-17-1 name=__codelineno-17-1></a><span class=c>--{ * candidate shared default }--[ network-instance default protocols bgp ]--</span>
</span><span id=__span-17-2><a href=#__codelineno-17-2 id=__codelineno-17-2 name=__codelineno-17-2></a>A:leaf1# <span class=n>/routing-policy                                                      </span>
</span><span id=__span-17-3><a href=#__codelineno-17-3 id=__codelineno-17-3 name=__codelineno-17-3></a>
</span><span id=__span-17-4><a href=#__codelineno-17-4 id=__codelineno-17-4 name=__codelineno-17-4></a><span class=err>--{ * candidate shared default }--[ routing-policy ]--                        </span>
</span><span id=__span-17-5><a href=#__codelineno-17-5 id=__codelineno-17-5 name=__codelineno-17-5></a><span class=err>A:leaf1#</span>
</span></code></pre></div> <p>Now that we are in the right context, we can paste the policy definition:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-18-1><a href=#__codelineno-18-1 id=__codelineno-18-1 name=__codelineno-18-1></a><span class=c>--{ +* candidate shared default }--[ routing-policy ]--</span>
</span><span id=__span-18-2><a href=#__codelineno-18-2 id=__codelineno-18-2 name=__codelineno-18-2></a>A:leaf1# <span class=n>info</span>
</span><span id=__span-18-3><a href=#__codelineno-18-3 id=__codelineno-18-3 name=__codelineno-18-3></a><span class=err>    policy all {</span>
</span><span id=__span-18-4><a href=#__codelineno-18-4 id=__codelineno-18-4 name=__codelineno-18-4></a><span class=err>        default-action {</span>
</span><span id=__span-18-5><a href=#__codelineno-18-5 id=__codelineno-18-5 name=__codelineno-18-5></a><span class=err>            policy-result </span><span class=l>accept</span>
</span><span id=__span-18-6><a href=#__codelineno-18-6 id=__codelineno-18-6 name=__codelineno-18-6></a><span class=err>        }</span>
</span><span id=__span-18-7><a href=#__codelineno-18-7 id=__codelineno-18-7 name=__codelineno-18-7></a><span class=err>    }</span>
</span></code></pre></div> </li> <li> <p><strong>Create peer-group config</strong><br> A peer group should include sessions that have a similar or almost identical configuration.<br> In this example, the peer group is named <code>eBGP-underlay</code> since it will be used to enable underlay routing between the leafs and spines.<br> New groups are administratively enabled by default.</p> <p>First, we come back to the bgp context from the routing-policy context:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-19-1><a href=#__codelineno-19-1 id=__codelineno-19-1 name=__codelineno-19-1></a><span class=c>--{ * candidate shared default }--[ routing-policy ]--</span>
</span><span id=__span-19-2><a href=#__codelineno-19-2 id=__codelineno-19-2 name=__codelineno-19-2></a>A:leaf1# <span class=n>/network-instance default protocols bgp      </span>
</span><span id=__span-19-3><a href=#__codelineno-19-3 id=__codelineno-19-3 name=__codelineno-19-3></a>
</span><span id=__span-19-4><a href=#__codelineno-19-4 id=__codelineno-19-4 name=__codelineno-19-4></a><span class=c>--{ * candidate shared default }--[ network-instance default protocols bgp ]--</span>
</span><span id=__span-19-5><a href=#__codelineno-19-5 id=__codelineno-19-5 name=__codelineno-19-5></a><span class=err>A:leaf1#</span>
</span></code></pre></div> <p>Now create the peer group. The common group configuration includes the <code>peer-as</code> and <code>export-policy</code> statements.</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-20-1><a href=#__codelineno-20-1 id=__codelineno-20-1 name=__codelineno-20-1></a><span class=c>--{ +* candidate shared default }--[ network-instance default protocols bgp ]--</span>
</span><span id=__span-20-2><a href=#__codelineno-20-2 id=__codelineno-20-2 name=__codelineno-20-2></a>A:leaf1# <span class=n>group eBGP-underlay</span>
</span><span id=__span-20-3><a href=#__codelineno-20-3 id=__codelineno-20-3 name=__codelineno-20-3></a>
</span><span id=__span-20-4><a href=#__codelineno-20-4 id=__codelineno-20-4 name=__codelineno-20-4></a><span class=c>--{ +* candidate shared default }--[ network-instance default protocols bgp group eBGP-underlay ]--</span>
</span><span id=__span-20-5><a href=#__codelineno-20-5 id=__codelineno-20-5 name=__codelineno-20-5></a>A:leaf1# <span class=n>peer-as 201                                                                               </span>
</span><span id=__span-20-6><a href=#__codelineno-20-6 id=__codelineno-20-6 name=__codelineno-20-6></a>
</span><span id=__span-20-7><a href=#__codelineno-20-7 id=__codelineno-20-7 name=__codelineno-20-7></a><span class=c>--{ +* candidate shared default }--[ network-instance default protocols bgp group eBGP-underlay ]--</span>
</span><span id=__span-20-8><a href=#__codelineno-20-8 id=__codelineno-20-8 name=__codelineno-20-8></a>A:leaf1# <span class=n>export-policy all</span>
</span><span id=__span-20-9><a href=#__codelineno-20-9 id=__codelineno-20-9 name=__codelineno-20-9></a>
</span><span id=__span-20-10><a href=#__codelineno-20-10 id=__codelineno-20-10 name=__codelineno-20-10></a><span class=c>--{ +* candidate shared default }--[ network-instance default protocols bgp group eBGP-underlay ]--</span>
</span><span id=__span-20-11><a href=#__codelineno-20-11 id=__codelineno-20-11 name=__codelineno-20-11></a>A:leaf1# <span class=n>import-policy all</span>
</span></code></pre></div> </li> <li> <p><strong>Configure neighbor</strong><br> Configure the BGP session with <code>spine1</code>. In this example, <code>spine1</code> is reachable through the <code>ethernet-1/49.0</code> subinterface. On this subnet, <code>spine1</code> has the IPv4 address <code>192.168.11.2</code>.<br> In this minimal configuration example, the only required configuration for the neighbor is its association with the group <code>eBGP-underlay</code> that was previously created.<br> New neighbors are administratively enabled by default.</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-21-1><a href=#__codelineno-21-1 id=__codelineno-21-1 name=__codelineno-21-1></a><span class=c>--{ +* candidate shared default }--[ network-instance default protocols bgp ]--</span>
</span><span id=__span-21-2><a href=#__codelineno-21-2 id=__codelineno-21-2 name=__codelineno-21-2></a>A:leaf1# <span class=n>neighbor 192.168.11.2 peer-group eBGP-underlay</span>
</span></code></pre></div> </li> <li> <p><strong>Commit configuration</strong><br> It seems like the EBGP config has been sorted out. Let's see what we have in our candidate datastore so far.<br> Regardless of which context you are currently in, you can see the diff against the baseline config by doing <code>diff /</code></p> <div class="language-diff highlight"><pre><span></span><code><span id=__span-22-1><a href=#__codelineno-22-1 id=__codelineno-22-1 name=__codelineno-22-1></a><span class=gd>--{ * candidate shared default }--[ network-instance default protocols bgp group eBGP-underlay ]--</span>
</span><span id=__span-22-2><a href=#__codelineno-22-2 id=__codelineno-22-2 name=__codelineno-22-2></a><span class=w>A:leaf1# diff /                                                                                   </span>
</span><span id=__span-22-3><a href=#__codelineno-22-3 id=__codelineno-22-3 name=__codelineno-22-3></a><span class=w> </span>   network-instance default {
</span><span id=__span-22-4><a href=#__codelineno-22-4 id=__codelineno-22-4 name=__codelineno-22-4></a><span class=w> </span>       protocols {
</span><span id=__span-22-5><a href=#__codelineno-22-5 id=__codelineno-22-5 name=__codelineno-22-5></a><span class=gi>+             bgp {</span>
</span><span id=__span-22-6><a href=#__codelineno-22-6 id=__codelineno-22-6 name=__codelineno-22-6></a><span class=gi>+                 autonomous-system 101</span>
</span><span id=__span-22-7><a href=#__codelineno-22-7 id=__codelineno-22-7 name=__codelineno-22-7></a><span class=gi>+                 router-id 10.0.0.1</span>
</span><span id=__span-22-8><a href=#__codelineno-22-8 id=__codelineno-22-8 name=__codelineno-22-8></a><span class=gi>+                 group eBGP-underlay {</span>
</span><span id=__span-22-9><a href=#__codelineno-22-9 id=__codelineno-22-9 name=__codelineno-22-9></a><span class=gi>+                     export-policy all</span>
</span><span id=__span-22-10><a href=#__codelineno-22-10 id=__codelineno-22-10 name=__codelineno-22-10></a><span class=gi>+                     import-policy all</span>
</span><span id=__span-22-11><a href=#__codelineno-22-11 id=__codelineno-22-11 name=__codelineno-22-11></a><span class=gi>+                     peer-as 201</span>
</span><span id=__span-22-12><a href=#__codelineno-22-12 id=__codelineno-22-12 name=__codelineno-22-12></a><span class=gi>+                 }</span>
</span><span id=__span-22-13><a href=#__codelineno-22-13 id=__codelineno-22-13 name=__codelineno-22-13></a><span class=gi>+                 ipv4-unicast {</span>
</span><span id=__span-22-14><a href=#__codelineno-22-14 id=__codelineno-22-14 name=__codelineno-22-14></a><span class=gi>+                     admin-state enable</span>
</span><span id=__span-22-15><a href=#__codelineno-22-15 id=__codelineno-22-15 name=__codelineno-22-15></a><span class=gi>+                 }</span>
</span><span id=__span-22-16><a href=#__codelineno-22-16 id=__codelineno-22-16 name=__codelineno-22-16></a><span class=gi>+                 neighbor 192.168.11.2 {</span>
</span><span id=__span-22-17><a href=#__codelineno-22-17 id=__codelineno-22-17 name=__codelineno-22-17></a><span class=gi>+                     peer-group eBGP-underlay</span>
</span><span id=__span-22-18><a href=#__codelineno-22-18 id=__codelineno-22-18 name=__codelineno-22-18></a><span class=gi>+                 }</span>
</span><span id=__span-22-19><a href=#__codelineno-22-19 id=__codelineno-22-19 name=__codelineno-22-19></a><span class=gi>+             }</span>
</span><span id=__span-22-20><a href=#__codelineno-22-20 id=__codelineno-22-20 name=__codelineno-22-20></a><span class=w> </span>       }
</span><span id=__span-22-21><a href=#__codelineno-22-21 id=__codelineno-22-21 name=__codelineno-22-21></a><span class=w> </span>   }
</span><span id=__span-22-22><a href=#__codelineno-22-22 id=__codelineno-22-22 name=__codelineno-22-22></a><span class=gi>+     routing-policy {</span>
</span><span id=__span-22-23><a href=#__codelineno-22-23 id=__codelineno-22-23 name=__codelineno-22-23></a><span class=gi>+         policy all {</span>
</span><span id=__span-22-24><a href=#__codelineno-22-24 id=__codelineno-22-24 name=__codelineno-22-24></a><span class=gi>+             default-action {</span>
</span><span id=__span-22-25><a href=#__codelineno-22-25 id=__codelineno-22-25 name=__codelineno-22-25></a><span class=gi>+                 policy-result accept</span>
</span><span id=__span-22-26><a href=#__codelineno-22-26 id=__codelineno-22-26 name=__codelineno-22-26></a><span class=gi>+             }</span>
</span><span id=__span-22-27><a href=#__codelineno-22-27 id=__codelineno-22-27 name=__codelineno-22-27></a><span class=gi>+         }</span>
</span><span id=__span-22-28><a href=#__codelineno-22-28 id=__codelineno-22-28 name=__codelineno-22-28></a><span class=gi>+     }</span>
</span></code></pre></div> <p>That is what we've added in all those steps above, everything looks OK, so we are good to commit the configuration.</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-23-1><a href=#__codelineno-23-1 id=__codelineno-23-1 name=__codelineno-23-1></a><span class=c>--{ +* candidate shared default }--[ network-instance default protocols bgp ]--</span>
</span><span id=__span-23-2><a href=#__codelineno-23-2 id=__codelineno-23-2 name=__codelineno-23-2></a>A:leaf1# <span class=n>commit now</span>
</span></code></pre></div> </li> </ol> <p>EBGP configuration on <code>leaf2</code> and <code>spine1</code> is almost a twin of the one we did for <code>leaf1</code>. Here is a copy-paste-able<sup id=fnref:3><a class=footnote-ref href=#fn:3>3</a></sup> config snippets for all of the nodes:</p> <div class="tabbed-set tabbed-alternate" data-tabs=3:3><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><input id=__tabbed_3_2 name=__tabbed_3 type=radio><input id=__tabbed_3_3 name=__tabbed_3 type=radio><div class=tabbed-labels><label for=__tabbed_3_1>leaf1</label><label for=__tabbed_3_2>leaf2</label><label for=__tabbed_3_3>spine1</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-24-1><a href=#__codelineno-24-1 id=__codelineno-24-1 name=__codelineno-24-1></a><span class=err>network-instance default {</span>
</span><span id=__span-24-2><a href=#__codelineno-24-2 id=__codelineno-24-2 name=__codelineno-24-2></a><span class=err>    protocols {</span>
</span><span id=__span-24-3><a href=#__codelineno-24-3 id=__codelineno-24-3 name=__codelineno-24-3></a><span class=err>        bgp {</span>
</span><span id=__span-24-4><a href=#__codelineno-24-4 id=__codelineno-24-4 name=__codelineno-24-4></a><span class=err>            autonomous-system</span> <span class=no>101</span>
</span><span id=__span-24-5><a href=#__codelineno-24-5 id=__codelineno-24-5 name=__codelineno-24-5></a><span class=err>            router-id </span><span class=no>10.0.0.1</span>
</span><span id=__span-24-6><a href=#__codelineno-24-6 id=__codelineno-24-6 name=__codelineno-24-6></a><span class=err>            group eBGP-underlay {</span>
</span><span id=__span-24-7><a href=#__codelineno-24-7 id=__codelineno-24-7 name=__codelineno-24-7></a><span class=err>                export-policy all</span>
</span><span id=__span-24-8><a href=#__codelineno-24-8 id=__codelineno-24-8 name=__codelineno-24-8></a><span class=err>                import-policy all</span>
</span><span id=__span-24-9><a href=#__codelineno-24-9 id=__codelineno-24-9 name=__codelineno-24-9></a><span class=err>                peer-as</span> <span class=no>201</span>
</span><span id=__span-24-10><a href=#__codelineno-24-10 id=__codelineno-24-10 name=__codelineno-24-10></a><span class=err>            }</span>
</span><span id=__span-24-11><a href=#__codelineno-24-11 id=__codelineno-24-11 name=__codelineno-24-11></a><span class=err>            ipv4-unicast {</span>
</span><span id=__span-24-12><a href=#__codelineno-24-12 id=__codelineno-24-12 name=__codelineno-24-12></a><span class=err>                admin-state </span><span class=l>enable</span>
</span><span id=__span-24-13><a href=#__codelineno-24-13 id=__codelineno-24-13 name=__codelineno-24-13></a><span class=err>            }</span>
</span><span id=__span-24-14><a href=#__codelineno-24-14 id=__codelineno-24-14 name=__codelineno-24-14></a><span class=err>            neighbor </span><span class=no>192.168.11.2 </span><span class=err>{</span>
</span><span id=__span-24-15><a href=#__codelineno-24-15 id=__codelineno-24-15 name=__codelineno-24-15></a><span class=err>                peer-group eBGP-underlay</span>
</span><span id=__span-24-16><a href=#__codelineno-24-16 id=__codelineno-24-16 name=__codelineno-24-16></a><span class=err>            }</span>
</span><span id=__span-24-17><a href=#__codelineno-24-17 id=__codelineno-24-17 name=__codelineno-24-17></a><span class=err>        }</span>
</span><span id=__span-24-18><a href=#__codelineno-24-18 id=__codelineno-24-18 name=__codelineno-24-18></a><span class=err>    }</span>
</span><span id=__span-24-19><a href=#__codelineno-24-19 id=__codelineno-24-19 name=__codelineno-24-19></a><span class=err>}</span>
</span><span id=__span-24-20><a href=#__codelineno-24-20 id=__codelineno-24-20 name=__codelineno-24-20></a><span class=err>routing-policy {</span>
</span><span id=__span-24-21><a href=#__codelineno-24-21 id=__codelineno-24-21 name=__codelineno-24-21></a><span class=err>    policy all {</span>
</span><span id=__span-24-22><a href=#__codelineno-24-22 id=__codelineno-24-22 name=__codelineno-24-22></a><span class=err>        default-action {</span>
</span><span id=__span-24-23><a href=#__codelineno-24-23 id=__codelineno-24-23 name=__codelineno-24-23></a><span class=err>            policy-result </span><span class=l>accept</span>
</span><span id=__span-24-24><a href=#__codelineno-24-24 id=__codelineno-24-24 name=__codelineno-24-24></a><span class=err>        }</span>
</span><span id=__span-24-25><a href=#__codelineno-24-25 id=__codelineno-24-25 name=__codelineno-24-25></a><span class=err>    }</span>
</span><span id=__span-24-26><a href=#__codelineno-24-26 id=__codelineno-24-26 name=__codelineno-24-26></a><span class=err>}</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-25-1><a href=#__codelineno-25-1 id=__codelineno-25-1 name=__codelineno-25-1></a><span class=err>network-instance default {</span>
</span><span id=__span-25-2><a href=#__codelineno-25-2 id=__codelineno-25-2 name=__codelineno-25-2></a><span class=err>    protocols {</span>
</span><span id=__span-25-3><a href=#__codelineno-25-3 id=__codelineno-25-3 name=__codelineno-25-3></a><span class=err>        bgp {</span>
</span><span id=__span-25-4><a href=#__codelineno-25-4 id=__codelineno-25-4 name=__codelineno-25-4></a><span class=err>            autonomous-system</span> <span class=no>102</span>
</span><span id=__span-25-5><a href=#__codelineno-25-5 id=__codelineno-25-5 name=__codelineno-25-5></a><span class=err>            router-id </span><span class=no>10.0.0.2</span>
</span><span id=__span-25-6><a href=#__codelineno-25-6 id=__codelineno-25-6 name=__codelineno-25-6></a><span class=err>            group eBGP-underlay {</span>
</span><span id=__span-25-7><a href=#__codelineno-25-7 id=__codelineno-25-7 name=__codelineno-25-7></a><span class=err>                export-policy all</span>
</span><span id=__span-25-8><a href=#__codelineno-25-8 id=__codelineno-25-8 name=__codelineno-25-8></a><span class=err>                import-policy all</span>
</span><span id=__span-25-9><a href=#__codelineno-25-9 id=__codelineno-25-9 name=__codelineno-25-9></a><span class=err>                peer-as</span> <span class=no>201</span>
</span><span id=__span-25-10><a href=#__codelineno-25-10 id=__codelineno-25-10 name=__codelineno-25-10></a><span class=err>            }</span>
</span><span id=__span-25-11><a href=#__codelineno-25-11 id=__codelineno-25-11 name=__codelineno-25-11></a><span class=err>            ipv4-unicast {</span>
</span><span id=__span-25-12><a href=#__codelineno-25-12 id=__codelineno-25-12 name=__codelineno-25-12></a><span class=err>                admin-state </span><span class=l>enable</span>
</span><span id=__span-25-13><a href=#__codelineno-25-13 id=__codelineno-25-13 name=__codelineno-25-13></a><span class=err>            }</span>
</span><span id=__span-25-14><a href=#__codelineno-25-14 id=__codelineno-25-14 name=__codelineno-25-14></a><span class=err>            neighbor </span><span class=no>192.168.12.2 </span><span class=err>{</span>
</span><span id=__span-25-15><a href=#__codelineno-25-15 id=__codelineno-25-15 name=__codelineno-25-15></a><span class=err>                peer-group eBGP-underlay</span>
</span><span id=__span-25-16><a href=#__codelineno-25-16 id=__codelineno-25-16 name=__codelineno-25-16></a><span class=err>            }</span>
</span><span id=__span-25-17><a href=#__codelineno-25-17 id=__codelineno-25-17 name=__codelineno-25-17></a><span class=err>        }</span>
</span><span id=__span-25-18><a href=#__codelineno-25-18 id=__codelineno-25-18 name=__codelineno-25-18></a><span class=err>    }</span>
</span><span id=__span-25-19><a href=#__codelineno-25-19 id=__codelineno-25-19 name=__codelineno-25-19></a><span class=err>}</span>
</span><span id=__span-25-20><a href=#__codelineno-25-20 id=__codelineno-25-20 name=__codelineno-25-20></a><span class=err>routing-policy {</span>
</span><span id=__span-25-21><a href=#__codelineno-25-21 id=__codelineno-25-21 name=__codelineno-25-21></a><span class=err>    policy all {</span>
</span><span id=__span-25-22><a href=#__codelineno-25-22 id=__codelineno-25-22 name=__codelineno-25-22></a><span class=err>        default-action {</span>
</span><span id=__span-25-23><a href=#__codelineno-25-23 id=__codelineno-25-23 name=__codelineno-25-23></a><span class=err>            policy-result </span><span class=l>accept</span>
</span><span id=__span-25-24><a href=#__codelineno-25-24 id=__codelineno-25-24 name=__codelineno-25-24></a><span class=err>        }</span>
</span><span id=__span-25-25><a href=#__codelineno-25-25 id=__codelineno-25-25 name=__codelineno-25-25></a><span class=err>    }</span>
</span><span id=__span-25-26><a href=#__codelineno-25-26 id=__codelineno-25-26 name=__codelineno-25-26></a><span class=err>}</span>
</span></code></pre></div> </div> <div class=tabbed-block> <p>Spine configuration is a bit different, in a way that <code>peer-as</code> is specified under the neighbor context, and not the group one. <div class="language-srl highlight"><pre><span></span><code><span id=__span-26-1><a href=#__codelineno-26-1 id=__codelineno-26-1 name=__codelineno-26-1></a><span class=err>network-instance default {</span>
</span><span id=__span-26-2><a href=#__codelineno-26-2 id=__codelineno-26-2 name=__codelineno-26-2></a><span class=err>    protocols {</span>
</span><span id=__span-26-3><a href=#__codelineno-26-3 id=__codelineno-26-3 name=__codelineno-26-3></a><span class=err>        bgp {</span>
</span><span id=__span-26-4><a href=#__codelineno-26-4 id=__codelineno-26-4 name=__codelineno-26-4></a><span class=err>            autonomous-system</span> <span class=no>201</span>
</span><span id=__span-26-5><a href=#__codelineno-26-5 id=__codelineno-26-5 name=__codelineno-26-5></a><span class=err>            router-id </span><span class=no>10.0.1.1</span>
</span><span id=__span-26-6><a href=#__codelineno-26-6 id=__codelineno-26-6 name=__codelineno-26-6></a><span class=err>            group eBGP-underlay {</span>
</span><span id=__span-26-7><a href=#__codelineno-26-7 id=__codelineno-26-7 name=__codelineno-26-7></a><span class=err>                export-policy all</span>
</span><span id=__span-26-8><a href=#__codelineno-26-8 id=__codelineno-26-8 name=__codelineno-26-8></a><span class=err>                import-policy all</span>
</span><span id=__span-26-9><a href=#__codelineno-26-9 id=__codelineno-26-9 name=__codelineno-26-9></a><span class=err>            }</span>
</span><span id=__span-26-10><a href=#__codelineno-26-10 id=__codelineno-26-10 name=__codelineno-26-10></a><span class=err>            ipv4-unicast {</span>
</span><span id=__span-26-11><a href=#__codelineno-26-11 id=__codelineno-26-11 name=__codelineno-26-11></a><span class=err>                admin-state </span><span class=l>enable</span>
</span><span id=__span-26-12><a href=#__codelineno-26-12 id=__codelineno-26-12 name=__codelineno-26-12></a><span class=err>            }</span>
</span><span id=__span-26-13><a href=#__codelineno-26-13 id=__codelineno-26-13 name=__codelineno-26-13></a><span class=err>            neighbor </span><span class=no>192.168.11.1 </span><span class=err>{</span>
</span><span id=__span-26-14><a href=#__codelineno-26-14 id=__codelineno-26-14 name=__codelineno-26-14></a><span class=err>                peer-group eBGP-underlay</span>
</span><span id=__span-26-15><a href=#__codelineno-26-15 id=__codelineno-26-15 name=__codelineno-26-15></a><span class=err>                peer-as</span> <span class=no>101</span>
</span><span id=__span-26-16><a href=#__codelineno-26-16 id=__codelineno-26-16 name=__codelineno-26-16></a><span class=err>            }</span>
</span><span id=__span-26-17><a href=#__codelineno-26-17 id=__codelineno-26-17 name=__codelineno-26-17></a><span class=err>            neighbor </span><span class=no>192.168.12.1 </span><span class=err>{</span>
</span><span id=__span-26-18><a href=#__codelineno-26-18 id=__codelineno-26-18 name=__codelineno-26-18></a><span class=err>                peer-group eBGP-underlay</span>
</span><span id=__span-26-19><a href=#__codelineno-26-19 id=__codelineno-26-19 name=__codelineno-26-19></a><span class=err>                peer-as</span> <span class=no>102</span>
</span><span id=__span-26-20><a href=#__codelineno-26-20 id=__codelineno-26-20 name=__codelineno-26-20></a><span class=err>            }</span>
</span><span id=__span-26-21><a href=#__codelineno-26-21 id=__codelineno-26-21 name=__codelineno-26-21></a><span class=err>        }</span>
</span><span id=__span-26-22><a href=#__codelineno-26-22 id=__codelineno-26-22 name=__codelineno-26-22></a><span class=err>    }</span>
</span><span id=__span-26-23><a href=#__codelineno-26-23 id=__codelineno-26-23 name=__codelineno-26-23></a><span class=err>}</span>
</span><span id=__span-26-24><a href=#__codelineno-26-24 id=__codelineno-26-24 name=__codelineno-26-24></a><span class=err>routing-policy {</span>
</span><span id=__span-26-25><a href=#__codelineno-26-25 id=__codelineno-26-25 name=__codelineno-26-25></a><span class=err>    policy all {</span>
</span><span id=__span-26-26><a href=#__codelineno-26-26 id=__codelineno-26-26 name=__codelineno-26-26></a><span class=err>        default-action {</span>
</span><span id=__span-26-27><a href=#__codelineno-26-27 id=__codelineno-26-27 name=__codelineno-26-27></a><span class=err>            policy-result </span><span class=l>accept</span>
</span><span id=__span-26-28><a href=#__codelineno-26-28 id=__codelineno-26-28 name=__codelineno-26-28></a><span class=err>        }</span>
</span><span id=__span-26-29><a href=#__codelineno-26-29 id=__codelineno-26-29 name=__codelineno-26-29></a><span class=err>    }</span>
</span><span id=__span-26-30><a href=#__codelineno-26-30 id=__codelineno-26-30 name=__codelineno-26-30></a><span class=err>}</span>
</span></code></pre></div></p> </div> </div> </div> <h2 id=loopbacks>Loopbacks<a class=headerlink href=#loopbacks title="Permanent link">#</a></h2> <p>As we will create a IBGP based EVPN control plane at a later stage, we need to configure loopback addresses for our leaf devices so that they can build an IBGP peering over those interfaces.</p> <p>In the context of the VXLAN data plane, a special kind of a loopback needs to be created - <a href=../../../kb/ifaces/#system><code>system0</code></a> interface.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The <code>system0.0</code> interface hosts the loopback address used to originate and typically terminate VXLAN packets. This address is also used by default as the next-hop of all EVPN routes.</p> </div> <p>Configuration of the <code>system0</code> interface is exactly the same as for the regular interfaces. The IPv4 addresses we assign to <code>system0</code> interfaces will match the Router-ID of a given BGP speaker.</p> <div class="tabbed-set tabbed-alternate" data-tabs=4:3><input checked=checked id=__tabbed_4_1 name=__tabbed_4 type=radio><input id=__tabbed_4_2 name=__tabbed_4 type=radio><input id=__tabbed_4_3 name=__tabbed_4 type=radio><div class=tabbed-labels><label for=__tabbed_4_1>leaf1</label><label for=__tabbed_4_2>leaf2</label><label for=__tabbed_4_3>spine1</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-27-1><a href=#__codelineno-27-1 id=__codelineno-27-1 name=__codelineno-27-1></a><span class=err>/interface </span><span class=no>system0</span><span class=err> {</span>
</span><span id=__span-27-2><a href=#__codelineno-27-2 id=__codelineno-27-2 name=__codelineno-27-2></a><span class=err>    admin-state </span><span class=l>enable</span>
</span><span id=__span-27-3><a href=#__codelineno-27-3 id=__codelineno-27-3 name=__codelineno-27-3></a><span class=err>    subinterface</span> <span class=no>0</span> <span class=err>{</span>
</span><span id=__span-27-4><a href=#__codelineno-27-4 id=__codelineno-27-4 name=__codelineno-27-4></a><span class=err>        ipv4 {</span>
</span><span id=__span-27-5><a href=#__codelineno-27-5 id=__codelineno-27-5 name=__codelineno-27-5></a><span class=err>            address </span><span class=no>10.0.0.1/32 </span><span class=err>{</span>
</span><span id=__span-27-6><a href=#__codelineno-27-6 id=__codelineno-27-6 name=__codelineno-27-6></a><span class=err>            }</span>
</span><span id=__span-27-7><a href=#__codelineno-27-7 id=__codelineno-27-7 name=__codelineno-27-7></a><span class=err>        }</span>
</span><span id=__span-27-8><a href=#__codelineno-27-8 id=__codelineno-27-8 name=__codelineno-27-8></a><span class=err>    }</span>
</span><span id=__span-27-9><a href=#__codelineno-27-9 id=__codelineno-27-9 name=__codelineno-27-9></a><span class=err>}</span>
</span><span id=__span-27-10><a href=#__codelineno-27-10 id=__codelineno-27-10 name=__codelineno-27-10></a><span class=err>/network-instance default {</span>
</span><span id=__span-27-11><a href=#__codelineno-27-11 id=__codelineno-27-11 name=__codelineno-27-11></a><span class=err>    interface </span><span class=no>system0.0</span><span class=err> {</span>
</span><span id=__span-27-12><a href=#__codelineno-27-12 id=__codelineno-27-12 name=__codelineno-27-12></a><span class=err>    }</span>
</span><span id=__span-27-13><a href=#__codelineno-27-13 id=__codelineno-27-13 name=__codelineno-27-13></a><span class=err>}</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-28-1><a href=#__codelineno-28-1 id=__codelineno-28-1 name=__codelineno-28-1></a><span class=err>/interface </span><span class=no>system0</span><span class=err> {</span>
</span><span id=__span-28-2><a href=#__codelineno-28-2 id=__codelineno-28-2 name=__codelineno-28-2></a><span class=err>    admin-state </span><span class=l>enable</span>
</span><span id=__span-28-3><a href=#__codelineno-28-3 id=__codelineno-28-3 name=__codelineno-28-3></a><span class=err>    subinterface</span> <span class=no>0</span> <span class=err>{</span>
</span><span id=__span-28-4><a href=#__codelineno-28-4 id=__codelineno-28-4 name=__codelineno-28-4></a><span class=err>        ipv4 {</span>
</span><span id=__span-28-5><a href=#__codelineno-28-5 id=__codelineno-28-5 name=__codelineno-28-5></a><span class=err>            address </span><span class=no>10.0.0.2/32 </span><span class=err>{</span>
</span><span id=__span-28-6><a href=#__codelineno-28-6 id=__codelineno-28-6 name=__codelineno-28-6></a><span class=err>            }</span>
</span><span id=__span-28-7><a href=#__codelineno-28-7 id=__codelineno-28-7 name=__codelineno-28-7></a><span class=err>        }</span>
</span><span id=__span-28-8><a href=#__codelineno-28-8 id=__codelineno-28-8 name=__codelineno-28-8></a><span class=err>    }</span>
</span><span id=__span-28-9><a href=#__codelineno-28-9 id=__codelineno-28-9 name=__codelineno-28-9></a><span class=err>}</span>
</span><span id=__span-28-10><a href=#__codelineno-28-10 id=__codelineno-28-10 name=__codelineno-28-10></a><span class=err>/network-instance default {</span>
</span><span id=__span-28-11><a href=#__codelineno-28-11 id=__codelineno-28-11 name=__codelineno-28-11></a><span class=err>    interface </span><span class=no>system0.0</span><span class=err> {</span>
</span><span id=__span-28-12><a href=#__codelineno-28-12 id=__codelineno-28-12 name=__codelineno-28-12></a><span class=err>    }</span>
</span><span id=__span-28-13><a href=#__codelineno-28-13 id=__codelineno-28-13 name=__codelineno-28-13></a><span class=err>}</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-29-1><a href=#__codelineno-29-1 id=__codelineno-29-1 name=__codelineno-29-1></a><span class=err>/interface </span><span class=no>system0</span><span class=err> {</span>
</span><span id=__span-29-2><a href=#__codelineno-29-2 id=__codelineno-29-2 name=__codelineno-29-2></a><span class=err>    admin-state </span><span class=l>enable</span>
</span><span id=__span-29-3><a href=#__codelineno-29-3 id=__codelineno-29-3 name=__codelineno-29-3></a><span class=err>    subinterface</span> <span class=no>0</span> <span class=err>{</span>
</span><span id=__span-29-4><a href=#__codelineno-29-4 id=__codelineno-29-4 name=__codelineno-29-4></a><span class=err>        ipv4 {</span>
</span><span id=__span-29-5><a href=#__codelineno-29-5 id=__codelineno-29-5 name=__codelineno-29-5></a><span class=err>            address </span><span class=no>10.0.1.1/32 </span><span class=err>{</span>
</span><span id=__span-29-6><a href=#__codelineno-29-6 id=__codelineno-29-6 name=__codelineno-29-6></a><span class=err>            }</span>
</span><span id=__span-29-7><a href=#__codelineno-29-7 id=__codelineno-29-7 name=__codelineno-29-7></a><span class=err>        }</span>
</span><span id=__span-29-8><a href=#__codelineno-29-8 id=__codelineno-29-8 name=__codelineno-29-8></a><span class=err>    }</span>
</span><span id=__span-29-9><a href=#__codelineno-29-9 id=__codelineno-29-9 name=__codelineno-29-9></a><span class=err>}</span>
</span><span id=__span-29-10><a href=#__codelineno-29-10 id=__codelineno-29-10 name=__codelineno-29-10></a><span class=err>/network-instance default {</span>
</span><span id=__span-29-11><a href=#__codelineno-29-11 id=__codelineno-29-11 name=__codelineno-29-11></a><span class=err>    interface </span><span class=no>system0.0</span><span class=err> {</span>
</span><span id=__span-29-12><a href=#__codelineno-29-12 id=__codelineno-29-12 name=__codelineno-29-12></a><span class=err>    }</span>
</span><span id=__span-29-13><a href=#__codelineno-29-13 id=__codelineno-29-13 name=__codelineno-29-13></a><span class=err>}</span>
</span></code></pre></div> </div> </div> </div> <h2 id=verification>Verification<a class=headerlink href=#verification title="Permanent link">#</a></h2> <p>As stated in the beginning of this section, the VXLAN VTEPs need to be advertised throughout the DC fabric. The <code>system0</code> interfaces we just configured are the VTEPs and they should be advertised via EBGP peering established before. The following verification commands can help ensure that.</p> <h3 id=bgp-status>BGP status<a class=headerlink href=#bgp-status title="Permanent link">#</a></h3> <p>The first thing worth verifying is that BGP protocol is enabled and operational on all devices. Below is an example of a BGP summary command issued on <code>leaf1</code>:</p> <div class="language-srl highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-30-1> 1</a></span>
<span class=normal><a href=#__codelineno-30-2> 2</a></span>
<span class=normal><a href=#__codelineno-30-3> 3</a></span>
<span class=normal><a href=#__codelineno-30-4> 4</a></span>
<span class=normal><a href=#__codelineno-30-5> 5</a></span>
<span class=normal><a href=#__codelineno-30-6> 6</a></span>
<span class=normal><a href=#__codelineno-30-7> 7</a></span>
<span class=normal><a href=#__codelineno-30-8> 8</a></span>
<span class=normal><a href=#__codelineno-30-9> 9</a></span>
<span class=normal><a href=#__codelineno-30-10>10</a></span>
<span class=normal><a href=#__codelineno-30-11>11</a></span>
<span class=normal><a href=#__codelineno-30-12>12</a></span>
<span class=normal><a href=#__codelineno-30-13>13</a></span>
<span class=normal><a href=#__codelineno-30-14>14</a></span>
<span class=normal><a href=#__codelineno-30-15>15</a></span>
<span class=normal><a href=#__codelineno-30-16>16</a></span>
<span class=normal><a href=#__codelineno-30-17>17</a></span>
<span class=normal><a href=#__codelineno-30-18>18</a></span>
<span class=normal><a href=#__codelineno-30-19>19</a></span>
<span class=normal><a href=#__codelineno-30-20>20</a></span>
<span class=normal><a href=#__codelineno-30-21>21</a></span>
<span class=normal><a href=#__codelineno-30-22>22</a></span>
<span class=normal><a href=#__codelineno-30-23>23</a></span>
<span class=normal><a href=#__codelineno-30-24>24</a></span>
<span class=normal><a href=#__codelineno-30-25>25</a></span>
<span class=normal><a href=#__codelineno-30-26>26</a></span>
<span class=normal><a href=#__codelineno-30-27>27</a></span>
<span class=normal><a href=#__codelineno-30-28>28</a></span>
<span class=normal><a href=#__codelineno-30-29>29</a></span>
<span class=normal><a href=#__codelineno-30-30>30</a></span>
<span class=normal><a href=#__codelineno-30-31>31</a></span>
<span class=normal><a href=#__codelineno-30-32>32</a></span>
<span class=normal><a href=#__codelineno-30-33>33</a></span>
<span class=normal><a href=#__codelineno-30-34>34</a></span>
<span class=normal><a href=#__codelineno-30-35>35</a></span>
<span class=normal><a href=#__codelineno-30-36>36</a></span>
<span class=normal><a href=#__codelineno-30-37>37</a></span>
<span class=normal><a href=#__codelineno-30-38>38</a></span>
<span class=normal><a href=#__codelineno-30-39>39</a></span>
<span class=normal><a href=#__codelineno-30-40>40</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1></a><span class=c>--{ + running }--[  ]--</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2></a>A:leaf1# <span class=n>show network-instance default protocols bgp summary</span>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3></a><span class=c>-------------------------------------------------------------</span>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4></a><span class=err>BGP is </span><span class=l>enabled</span><span class=err> and </span><span class=l>up</span><span class=err> in network-instance</span><span class=l> "default"</span>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5></a><span class=err>Global AS number  :</span> <span class=no>101</span>
</span><span id=__span-30-6><a id=__codelineno-30-6 name=__codelineno-30-6></a><span class=err>BGP identifier    : </span><span class=no>10.0.0.1</span>
</span><span id=__span-30-7><a id=__codelineno-30-7 name=__codelineno-30-7></a><span class=c>-------------------------------------------------------------</span>
</span><span id=__span-30-8><a id=__codelineno-30-8 name=__codelineno-30-8></a><span class=err>  Total paths               :</span> <span class=no>3</span>
</span><span id=__span-30-9><a id=__codelineno-30-9 name=__codelineno-30-9></a><span class=err>  Received routes           :</span> <span class=no>3</span>
</span><span id=__span-30-10><a id=__codelineno-30-10 name=__codelineno-30-10></a><span class=err>  Received and active routes: None</span>
</span><span id=__span-30-11><a id=__codelineno-30-11 name=__codelineno-30-11></a><span class=err>  Total </span><span class=l>UP</span><span class=err> peers            :</span> <span class=no>1</span>
</span><span id=__span-30-12><a id=__codelineno-30-12 name=__codelineno-30-12></a><span class=err>  Configured peers          : </span><span class=no>1</span>, <span class=no>0</span><span class=err> are </span><span class=se>disabled</span>
</span><span id=__span-30-13><a id=__codelineno-30-13 name=__codelineno-30-13></a><span class=err>  Dynamic peers             : None</span>
</span><span id=__span-30-14><a id=__codelineno-30-14 name=__codelineno-30-14></a><span class=c>-------------------------------------------------------------</span>
</span><span id=__span-30-15><a id=__codelineno-30-15 name=__codelineno-30-15></a><span class=err>Default preferences</span>
</span><span id=__span-30-16><a id=__codelineno-30-16 name=__codelineno-30-16></a><span class=err>  BGP Local Preference attribute:</span> <span class=no>100</span>
</span><span id=__span-30-17><a id=__codelineno-30-17 name=__codelineno-30-17></a><span class=err>  EBGP route-table preference   :</span> <span class=no>170</span>
</span><span id=__span-30-18><a id=__codelineno-30-18 name=__codelineno-30-18></a><span class=err>  IBGP route-table preference   :</span> <span class=no>170</span>
</span><span id=__span-30-19><a id=__codelineno-30-19 name=__codelineno-30-19></a><span class=c>-------------------------------------------------------------</span>
</span><span id=__span-30-20><a id=__codelineno-30-20 name=__codelineno-30-20></a><span class=err>Wait for FIB install to advertise: </span><span class=l>True</span>
</span><span id=__span-30-21><a id=__codelineno-30-21 name=__codelineno-30-21></a><span class=err>Send rapid withdrawals           : </span><span class=se>disabled</span>
</span><span id=__span-30-22><a id=__codelineno-30-22 name=__codelineno-30-22></a><span class=c>-------------------------------------------------------------</span>
</span><span id=__span-30-23><a id=__codelineno-30-23 name=__codelineno-30-23></a><span class=err>Ipv4-unicast AFI/SAFI</span>
</span><span id=__span-30-24><a id=__codelineno-30-24 name=__codelineno-30-24></a><span class=err>    Received routes               :</span> <span class=no>3</span>
</span><span id=__span-30-25><a id=__codelineno-30-25 name=__codelineno-30-25></a><span class=err>    Received and active routes    : None</span>
</span><span id=__span-30-26><a id=__codelineno-30-26 name=__codelineno-30-26></a><span class=err>    Max number of multipaths      : </span><span class=no>1</span>, <span class=no>1</span>
</span><span id=__span-30-27><a id=__codelineno-30-27 name=__codelineno-30-27></a><span class=err>    Multipath can transit multi AS: </span><span class=l>True</span>
</span><span id=__span-30-28><a id=__codelineno-30-28 name=__codelineno-30-28></a><span class=c>-------------------------------------------------------------</span>
</span><span id=__span-30-29><a id=__codelineno-30-29 name=__codelineno-30-29></a><span class=err>Ipv6-unicast AFI/SAFI</span>
</span><span id=__span-30-30><a id=__codelineno-30-30 name=__codelineno-30-30></a><span class=err>    Received routes               : None</span>
</span><span id=__span-30-31><a id=__codelineno-30-31 name=__codelineno-30-31></a><span class=err>    Received and active routes    : None</span>
</span><span id=__span-30-32><a id=__codelineno-30-32 name=__codelineno-30-32></a><span class=err>    Max number of multipaths      : </span><span class=no>1</span>,<span class=no>1</span>
</span><span id=__span-30-33><a id=__codelineno-30-33 name=__codelineno-30-33></a><span class=err>    Multipath can transit multi AS: </span><span class=l>True</span>
</span><span id=__span-30-34><a id=__codelineno-30-34 name=__codelineno-30-34></a><span class=c>-------------------------------------------------------------</span>
</span><span id=__span-30-35><a id=__codelineno-30-35 name=__codelineno-30-35></a><span class=err>EVPN-unicast AFI/SAFI</span>
</span><span id=__span-30-36><a id=__codelineno-30-36 name=__codelineno-30-36></a><span class=err>    Received routes               : None</span>
</span><span id=__span-30-37><a id=__codelineno-30-37 name=__codelineno-30-37></a><span class=err>    Received and active routes    : None</span>
</span><span id=__span-30-38><a id=__codelineno-30-38 name=__codelineno-30-38></a><span class=err>    Max number of multipaths      : N/A</span>
</span><span id=__span-30-39><a id=__codelineno-30-39 name=__codelineno-30-39></a><span class=err>    Multipath can transit multi AS: N/A</span>
</span><span id=__span-30-40><a id=__codelineno-30-40 name=__codelineno-30-40></a><span class=c>-------------------------------------------------------------</span>
</span></code></pre></div></td></tr></table></div> <h3 id=bgp-neighbor-status>BGP neighbor status<a class=headerlink href=#bgp-neighbor-status title="Permanent link">#</a></h3> <p>Equally important is the neighbor summary status that we can observe with the following:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-31-1><a href=#__codelineno-31-1 id=__codelineno-31-1 name=__codelineno-31-1></a><span class=c>--{ + running }--[  ]--</span>
</span><span id=__span-31-2><a href=#__codelineno-31-2 id=__codelineno-31-2 name=__codelineno-31-2></a>A:spine1# <span class=n>show network-instance default protocols bgp neighbor</span>
</span><span id=__span-31-3><a href=#__codelineno-31-3 id=__codelineno-31-3 name=__codelineno-31-3></a><span class=c>----------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-31-4><a href=#__codelineno-31-4 id=__codelineno-31-4 name=__codelineno-31-4></a><span class=err>BGP neighbor summary for network-instance</span><span class=l> "default"</span>
</span><span id=__span-31-5><a href=#__codelineno-31-5 id=__codelineno-31-5 name=__codelineno-31-5></a><span class=err>Flags: S static, D dynamic, L discovered by LLDP, B BFD </span><span class=l>enabled</span><span class=err>, - </span><span class=se>disabled</span><span class=err>, * slow</span>
</span><span id=__span-31-6><a href=#__codelineno-31-6 id=__codelineno-31-6 name=__codelineno-31-6></a><span class=c>----------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-31-7><a href=#__codelineno-31-7 id=__codelineno-31-7 name=__codelineno-31-7></a><span class=c>----------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-31-8><a href=#__codelineno-31-8 id=__codelineno-31-8 name=__codelineno-31-8></a><span class=err>+----------------+-----------------------+----------------+------+---------+-------------+-------------+-----------+-----------------------+</span>
</span><span id=__span-31-9><a href=#__codelineno-31-9 id=__codelineno-31-9 name=__codelineno-31-9></a><span class=err>|    Net-Inst    |         Peer          |     Group      | Flag | Peer-AS |    State    |   Uptime    | AFI/SAFI  |    [Rx/Active/Tx]     |</span>
</span><span id=__span-31-10><a href=#__codelineno-31-10 id=__codelineno-31-10 name=__codelineno-31-10></a><span class=err>|                |                       |                |  s   |         |             |             |           |                       |</span>
</span><span id=__span-31-11><a href=#__codelineno-31-11 id=__codelineno-31-11 name=__codelineno-31-11></a><span class=err>+================+=======================+================+======+=========+=============+=============+===========+=======================+</span>
</span><span id=__span-31-12><a href=#__codelineno-31-12 id=__codelineno-31-12 name=__codelineno-31-12></a><span class=err>| default        | </span><span class=no>192.168.11.1 </span><span class=err>         | eBGP-underlay  | S    |</span> <span class=no>101</span> <span class=err>    | </span><span class=l>established</span><span class=err> | 0d:18h:20m: | ipv4-unic | </span>[<span class=no>2</span>/<span class=no>1</span>/<span class=no>4</span><span class=err>]               |</span>
</span><span id=__span-31-13><a href=#__codelineno-31-13 id=__codelineno-31-13 name=__codelineno-31-13></a><span class=err>|                |                       |                |      |         |             | 49s         | ast       |                       |</span>
</span><span id=__span-31-14><a href=#__codelineno-31-14 id=__codelineno-31-14 name=__codelineno-31-14></a><span class=err>| default        | </span><span class=no>192.168.12.1 </span><span class=err>         | eBGP-underlay  | S    |</span> <span class=no>102</span> <span class=err>    | </span><span class=l>established</span><span class=err> | 0d:18h:20m: | ipv4-unic | </span>[<span class=no>2</span>/<span class=no>1</span>/<span class=no>4</span><span class=err>]               |</span>
</span><span id=__span-31-15><a href=#__codelineno-31-15 id=__codelineno-31-15 name=__codelineno-31-15></a><span class=err>|                |                       |                |      |         |             | 9s          | ast       |                       |</span>
</span><span id=__span-31-16><a href=#__codelineno-31-16 id=__codelineno-31-16 name=__codelineno-31-16></a><span class=err>+----------------+-----------------------+----------------+------+---------+-------------+-------------+-----------+-----------------------+</span>
</span><span id=__span-31-17><a href=#__codelineno-31-17 id=__codelineno-31-17 name=__codelineno-31-17></a><span class=c>----------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-31-18><a href=#__codelineno-31-18 id=__codelineno-31-18 name=__codelineno-31-18></a><span class=err>Summary:</span>
</span><span id=__span-31-19><a href=#__codelineno-31-19 id=__codelineno-31-19 name=__codelineno-31-19></a><span class=no>2</span> <span class=err>configured neighbors,</span> <span class=no>2</span> <span class=err>configured sessions are </span><span class=l>established</span>,<span class=no>0</span><span class=err> </span><span class=se>disabled</span><span class=err> peers</span>
</span><span id=__span-31-20><a href=#__codelineno-31-20 id=__codelineno-31-20 name=__codelineno-31-20></a><span class=no>0</span> <span class=err>dynamic peers</span>
</span></code></pre></div> <p>With this command we can ensure that the ipv4-unicast routes are exchanged between the BGP peers and all the sessions are in established state.</p> <h3 id=receivedadvertised-routes>Received/Advertised routes<a class=headerlink href=#receivedadvertised-routes title="Permanent link">#</a></h3> <p>The reason we configured EBGP in the fabric's the underlay is to advertise the VXLAN tunnel endpoints - <code>system0</code> interfaces. In the below output we verify that <code>leaf1</code> advertises the prefix of <code>system0</code> (<code>10.0.0.1/32</code>) interface towards its EBGP <code>spine1</code> peer:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-32-1><a href=#__codelineno-32-1 id=__codelineno-32-1 name=__codelineno-32-1></a><span class=c>--{ + running }--[  ]--</span>
</span><span id=__span-32-2><a href=#__codelineno-32-2 id=__codelineno-32-2 name=__codelineno-32-2></a>A:leaf1# <span class=n>show network-instance default protocols bgp neighbor 192.168.11.2 advertised-rou</span>
</span><span id=__span-32-3><a href=#__codelineno-32-3 id=__codelineno-32-3 name=__codelineno-32-3></a><span class=err>tes ipv4</span>
</span><span id=__span-32-4><a href=#__codelineno-32-4 id=__codelineno-32-4 name=__codelineno-32-4></a><span class=c>-----------------------------------------------------------------------------------------</span>
</span><span id=__span-32-5><a href=#__codelineno-32-5 id=__codelineno-32-5 name=__codelineno-32-5></a><span class=err>Peer        : 192.168.11.2, remote AS: 201, local AS:</span> <span class=no>101</span>
</span><span id=__span-32-6><a href=#__codelineno-32-6 id=__codelineno-32-6 name=__codelineno-32-6></a><span class=err>Type        : static</span>
</span><span id=__span-32-7><a href=#__codelineno-32-7 id=__codelineno-32-7 name=__codelineno-32-7></a><span class=err>Description : None</span>
</span><span id=__span-32-8><a href=#__codelineno-32-8 id=__codelineno-32-8 name=__codelineno-32-8></a><span class=err>Group       : eBGP-underlay</span>
</span><span id=__span-32-9><a href=#__codelineno-32-9 id=__codelineno-32-9 name=__codelineno-32-9></a><span class=c>-----------------------------------------------------------------------------------------</span>
</span><span id=__span-32-10><a href=#__codelineno-32-10 id=__codelineno-32-10 name=__codelineno-32-10></a><span class=err>Origin codes: i=IGP, e=EGP, ?=incomplete</span>
</span><span id=__span-32-11><a href=#__codelineno-32-11 id=__codelineno-32-11 name=__codelineno-32-11></a><span class=err>+-------------------------------------------------------------------------------------+</span>
</span><span id=__span-32-12><a href=#__codelineno-32-12 id=__codelineno-32-12 name=__codelineno-32-12></a><span class=err>|    Network        Next Hop       MED     LocPref           AsPath           Origin  |</span>
</span><span id=__span-32-13><a href=#__codelineno-32-13 id=__codelineno-32-13 name=__codelineno-32-13></a><span class=err>+=====================================================================================+</span>
</span><span id=__span-32-14><a href=#__codelineno-32-14 id=__codelineno-32-14 name=__codelineno-32-14></a><span class=err>| </span><span class=no>10.0.0.1/32 </span><span class=err>     192.168.11.      -       </span> <span class=no>100</span> <span class=err>    </span>[<span class=no>101</span><span class=err>]                       i    |</span>
</span><span id=__span-32-15><a href=#__codelineno-32-15 id=__codelineno-32-15 name=__codelineno-32-15></a><span class=err>|                 </span> <span class=no>1</span> <span class=err>                                                                 |</span>
</span><span id=__span-32-16><a href=#__codelineno-32-16 id=__codelineno-32-16 name=__codelineno-32-16></a><span class=err>| </span><span class=no>192.168.11.0/3 </span><span class=err>  192.168.11.      -       </span> <span class=no>100</span> <span class=err>    </span>[<span class=no>101</span><span class=err>]                       i    |</span>
</span><span id=__span-32-17><a href=#__codelineno-32-17 id=__codelineno-32-17 name=__codelineno-32-17></a><span class=err>|</span> <span class=no>0</span> <span class=err>              </span> <span class=no>1</span> <span class=err>                                                                 |</span>
</span><span id=__span-32-18><a href=#__codelineno-32-18 id=__codelineno-32-18 name=__codelineno-32-18></a><span class=err>+-------------------------------------------------------------------------------------+</span>
</span><span id=__span-32-19><a href=#__codelineno-32-19 id=__codelineno-32-19 name=__codelineno-32-19></a><span class=c>-----------------------------------------------------------------------------------------</span>
</span><span id=__span-32-20><a href=#__codelineno-32-20 id=__codelineno-32-20 name=__codelineno-32-20></a><span class=no>2</span> <span class=err>advertised BGP routes</span>
</span><span id=__span-32-21><a href=#__codelineno-32-21 id=__codelineno-32-21 name=__codelineno-32-21></a><span class=c>-----------------------------------------------------------------------------------------</span>
</span></code></pre></div> <p>On the far end of the fabric, <code>leaf2</code> receives both the <code>leaf1</code> and <code>spine1</code> system interface prefixes:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-33-1><a href=#__codelineno-33-1 id=__codelineno-33-1 name=__codelineno-33-1></a><span class=c>--{ + running }--[  ]--</span>
</span><span id=__span-33-2><a href=#__codelineno-33-2 id=__codelineno-33-2 name=__codelineno-33-2></a>A:leaf2# <span class=n>show network-instance default protocols bgp neighbor 192.168.12.2 received-route</span>
</span><span id=__span-33-3><a href=#__codelineno-33-3 id=__codelineno-33-3 name=__codelineno-33-3></a><span class=err>s ipv4</span>
</span><span id=__span-33-4><a href=#__codelineno-33-4 id=__codelineno-33-4 name=__codelineno-33-4></a><span class=c>-----------------------------------------------------------------------------------------</span>
</span><span id=__span-33-5><a href=#__codelineno-33-5 id=__codelineno-33-5 name=__codelineno-33-5></a><span class=err>Peer        : 192.168.12.2, remote AS: 201, local AS:</span> <span class=no>102</span>
</span><span id=__span-33-6><a href=#__codelineno-33-6 id=__codelineno-33-6 name=__codelineno-33-6></a><span class=err>Type        : static</span>
</span><span id=__span-33-7><a href=#__codelineno-33-7 id=__codelineno-33-7 name=__codelineno-33-7></a><span class=err>Description : None</span>
</span><span id=__span-33-8><a href=#__codelineno-33-8 id=__codelineno-33-8 name=__codelineno-33-8></a><span class=err>Group       : eBGP-underlay</span>
</span><span id=__span-33-9><a href=#__codelineno-33-9 id=__codelineno-33-9 name=__codelineno-33-9></a><span class=c>-----------------------------------------------------------------------------------------</span>
</span><span id=__span-33-10><a href=#__codelineno-33-10 id=__codelineno-33-10 name=__codelineno-33-10></a><span class=err>Status codes: u=used, *=valid, &gt;=best, x=stale</span>
</span><span id=__span-33-11><a href=#__codelineno-33-11 id=__codelineno-33-11 name=__codelineno-33-11></a><span class=err>Origin codes: i=IGP, e=EGP, ?=incomplete</span>
</span><span id=__span-33-12><a href=#__codelineno-33-12 id=__codelineno-33-12 name=__codelineno-33-12></a><span class=err>+-----------------------------------------------------------------------------------+</span>
</span><span id=__span-33-13><a href=#__codelineno-33-13 id=__codelineno-33-13 name=__codelineno-33-13></a><span class=err>|  Status      Network    Next Hop       MED       LocPref     AsPath      Origin   |</span>
</span><span id=__span-33-14><a href=#__codelineno-33-14 id=__codelineno-33-14 name=__codelineno-33-14></a><span class=err>+===================================================================================+</span>
</span><span id=__span-33-15><a href=#__codelineno-33-15 id=__codelineno-33-15 name=__codelineno-33-15></a><span class=err>|    u*&gt;      10.0.0.1/   192.168.1       -         </span> <span class=no>100</span> <span class=err>     </span>[<span class=no>201</span><span class=err>,           i     |</span>
</span><span id=__span-33-16><a href=#__codelineno-33-16 id=__codelineno-33-16 name=__codelineno-33-16></a><span class=err>|            </span> <span class=no>32</span> <span class=err>         2.2                                 101]                  |</span>
</span><span id=__span-33-17><a href=#__codelineno-33-17 id=__codelineno-33-17 name=__codelineno-33-17></a><span class=err>|    u*&gt;      10.0.1.1/   192.168.1       -         </span> <span class=no>100</span> <span class=err>     </span>[<span class=no>201</span><span class=err>]           i     |</span>
</span><span id=__span-33-18><a href=#__codelineno-33-18 id=__codelineno-33-18 name=__codelineno-33-18></a><span class=err>|            </span> <span class=no>32</span> <span class=err>         2.2                                                       |</span>
</span><span id=__span-33-19><a href=#__codelineno-33-19 id=__codelineno-33-19 name=__codelineno-33-19></a><span class=err>|    u*&gt;      192.168.1   192.168.1       -         </span> <span class=no>100</span> <span class=err>     </span>[<span class=no>201</span><span class=err>]           i     |</span>
</span><span id=__span-33-20><a href=#__codelineno-33-20 id=__codelineno-33-20 name=__codelineno-33-20></a><span class=err>|             1.0</span>/<span class=no>30</span><span class=err>      2.2                                                       |</span>
</span><span id=__span-33-21><a href=#__codelineno-33-21 id=__codelineno-33-21 name=__codelineno-33-21></a><span class=err>|     *       192.168.1   192.168.1       -         </span> <span class=no>100</span> <span class=err>     </span>[<span class=no>201</span><span class=err>]           i     |</span>
</span><span id=__span-33-22><a href=#__codelineno-33-22 id=__codelineno-33-22 name=__codelineno-33-22></a><span class=err>|             2.0</span>/<span class=no>30</span><span class=err>      2.2                                                       |</span>
</span><span id=__span-33-23><a href=#__codelineno-33-23 id=__codelineno-33-23 name=__codelineno-33-23></a><span class=err>+-----------------------------------------------------------------------------------+</span>
</span><span id=__span-33-24><a href=#__codelineno-33-24 id=__codelineno-33-24 name=__codelineno-33-24></a><span class=c>-----------------------------------------------------------------------------------------</span>
</span><span id=__span-33-25><a href=#__codelineno-33-25 id=__codelineno-33-25 name=__codelineno-33-25></a><span class=no>4</span> <span class=err>received BGP routes :</span> <span class=no>3</span> <span class=err>used</span> <span class=no>4</span> <span class=err>valid</span>
</span><span id=__span-33-26><a href=#__codelineno-33-26 id=__codelineno-33-26 name=__codelineno-33-26></a><span class=c>-----------------------------------------------------------------------------------------</span>
</span></code></pre></div> <h3 id=route-table>Route table<a class=headerlink href=#route-table title="Permanent link">#</a></h3> <p>The last stop in the control plane verification ride would be to check if the remote loopback prefixes were installed in the <code>default</code> network-instance where we expect them to be:</p> <div class="language-srl highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-34-1> 1</a></span>
<span class=normal><a href=#__codelineno-34-2> 2</a></span>
<span class=normal><a href=#__codelineno-34-3> 3</a></span>
<span class=normal><a href=#__codelineno-34-4> 4</a></span>
<span class=normal><a href=#__codelineno-34-5> 5</a></span>
<span class=normal><a href=#__codelineno-34-6> 6</a></span>
<span class=normal><a href=#__codelineno-34-7> 7</a></span>
<span class=normal><a href=#__codelineno-34-8> 8</a></span>
<span class=normal><a href=#__codelineno-34-9> 9</a></span>
<span class=normal><a href=#__codelineno-34-10>10</a></span>
<span class=normal><a href=#__codelineno-34-11>11</a></span>
<span class=normal><a href=#__codelineno-34-12>12</a></span>
<span class=normal><a href=#__codelineno-34-13>13</a></span>
<span class=normal><a href=#__codelineno-34-14>14</a></span>
<span class=normal><a href=#__codelineno-34-15>15</a></span>
<span class=normal><a href=#__codelineno-34-16>16</a></span>
<span class=normal><a href=#__codelineno-34-17>17</a></span>
<span class=normal><a href=#__codelineno-34-18>18</a></span>
<span class=normal><a href=#__codelineno-34-19>19</a></span>
<span class=normal><a href=#__codelineno-34-20>20</a></span>
<span class=normal><a href=#__codelineno-34-21>21</a></span>
<span class=normal><a href=#__codelineno-34-22>22</a></span>
<span class=normal><a href=#__codelineno-34-23>23</a></span>
<span class=normal><a href=#__codelineno-34-24>24</a></span>
<span class=normal><a href=#__codelineno-34-25>25</a></span>
<span class=normal><a href=#__codelineno-34-26>26</a></span>
<span class=normal><a href=#__codelineno-34-27>27</a></span>
<span class=normal><a href=#__codelineno-34-28>28</a></span>
<span class=normal><a href=#__codelineno-34-29>29</a></span>
<span class=normal><a href=#__codelineno-34-30>30</a></span>
<span class=normal><a href=#__codelineno-34-31>31</a></span>
<span class=normal><a href=#__codelineno-34-32>32</a></span>
<span class=normal><a href=#__codelineno-34-33>33</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1></a><span class=c>--{ running }--[  ]--</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2></a>A:leaf1# <span class=n>show network-instance default route-table ipv4-unicast summary</span>
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3></a><span class=c>-----------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-34-4><a id=__codelineno-34-4 name=__codelineno-34-4></a><span class=err>IPv4 Unicast route table of network instance default</span>
</span><span id=__span-34-5><a id=__codelineno-34-5 name=__codelineno-34-5></a><span class=c>-----------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-34-6><a id=__codelineno-34-6 name=__codelineno-34-6></a><span class=err>+-----------------+-------+------------+----------------------+----------------------+----------+---------+-----------+-----------+</span>
</span><span id=__span-34-7><a id=__codelineno-34-7 name=__codelineno-34-7></a><span class=err>|     Prefix      |  ID   | Route Type |     Route Owner      |      Best/Fib-       |  Metric  |  Pref   | Next-hop  | Next-hop  |</span>
</span><span id=__span-34-8><a id=__codelineno-34-8 name=__codelineno-34-8></a><span class=err>|                 |       |            |                      |     status(slot)     |          |         |  (Type)   | Interface |</span>
</span><span id=__span-34-9><a id=__codelineno-34-9 name=__codelineno-34-9></a><span class=err>+=================+=======+============+======================+======================+==========+=========+===========+===========+</span>
</span><span id=__span-34-10><a id=__codelineno-34-10 name=__codelineno-34-10></a><span class=err>| </span><span class=no>10.0.0.1/32 </span><span class=err>    |</span> <span class=no>3</span> <span class=err>    | host       | net_inst_mgr         | </span><span class=l>True</span><span class=err>/</span><span class=l>success</span><span class=err>         |</span> <span class=no>0</span> <span class=err>       |</span> <span class=no>0</span> <span class=err>      | None      | None      |</span>
</span><span id=__span-34-11><a id=__codelineno-34-11 name=__codelineno-34-11></a><span class=err>|                 |       |            |                      |                      |          |         | (extract) |           |</span>
</span><span id=__span-34-12><a id=__codelineno-34-12 name=__codelineno-34-12></a><span class=hll><span class=err>| </span><span class=no>10.0.0.2/32 </span><span class=err>    |</span> <span class=no>0</span> <span class=err>    | bgp        | bgp_mgr              | </span><span class=l>True</span><span class=err>/</span><span class=l>success</span><span class=err>         |</span> <span class=no>0</span> <span class=err>       |</span> <span class=no>170</span> <span class=err>    | 192.168.1 | None      |</span>
</span></span><span id=__span-34-13><a id=__codelineno-34-13 name=__codelineno-34-13></a><span class=err>|                 |       |            |                      |                      |          |         | 1.2 (indi |           |</span>
</span><span id=__span-34-14><a id=__codelineno-34-14 name=__codelineno-34-14></a><span class=err>|                 |       |            |                      |                      |          |         | rect)     |           |</span>
</span><span id=__span-34-15><a id=__codelineno-34-15 name=__codelineno-34-15></a><span class=hll><span class=err>| </span><span class=no>10.0.1.1/32 </span><span class=err>    |</span> <span class=no>0</span> <span class=err>    | bgp        | bgp_mgr              | </span><span class=l>True</span><span class=err>/</span><span class=l>success</span><span class=err>         |</span> <span class=no>0</span> <span class=err>       |</span> <span class=no>170</span> <span class=err>    | 192.168.1 | None      |</span>
</span></span><span id=__span-34-16><a id=__codelineno-34-16 name=__codelineno-34-16></a><span class=err>|                 |       |            |                      |                      |          |         | 1.2 (indi |           |</span>
</span><span id=__span-34-17><a id=__codelineno-34-17 name=__codelineno-34-17></a><span class=err>|                 |       |            |                      |                      |          |         | rect)     |           |</span>
</span><span id=__span-34-18><a id=__codelineno-34-18 name=__codelineno-34-18></a><span class=err>| </span><span class=no>192.168.11.0/30 </span><span class=err>|</span> <span class=no>1</span> <span class=err>    | local      | net_inst_mgr         | </span><span class=l>True</span><span class=err>/</span><span class=l>success</span><span class=err>         |</span> <span class=no>0</span> <span class=err>       |</span> <span class=no>0</span> <span class=err>      | 192.168.1 | ethernet- |</span>
</span><span id=__span-34-19><a id=__codelineno-34-19 name=__codelineno-34-19></a><span class=err>|                 |       |            |                      |                      |          |         | 1.1       | 1</span>/<span class=no>49</span><span class=err>.0    |</span>
</span><span id=__span-34-20><a id=__codelineno-34-20 name=__codelineno-34-20></a><span class=err>|                 |       |            |                      |                      |          |         | (direct)  |           |</span>
</span><span id=__span-34-21><a id=__codelineno-34-21 name=__codelineno-34-21></a><span class=err>| </span><span class=no>192.168.11.1/32 </span><span class=err>|</span> <span class=no>1</span> <span class=err>    | host       | net_inst_mgr         | </span><span class=l>True</span><span class=err>/</span><span class=l>success</span><span class=err>         |</span> <span class=no>0</span> <span class=err>       |</span> <span class=no>0</span> <span class=err>      | None      | None      |</span>
</span><span id=__span-34-22><a id=__codelineno-34-22 name=__codelineno-34-22></a><span class=err>|                 |       |            |                      |                      |          |         | (extract) |           |</span>
</span><span id=__span-34-23><a id=__codelineno-34-23 name=__codelineno-34-23></a><span class=err>| </span><span class=no>192.168.11.3/32 </span><span class=err>|</span> <span class=no>1</span> <span class=err>    | host       | net_inst_mgr         | </span><span class=l>True</span><span class=err>/</span><span class=l>success</span><span class=err>         |</span> <span class=no>0</span> <span class=err>       |</span> <span class=no>0</span> <span class=err>      | None (bro | None      |</span>
</span><span id=__span-34-24><a id=__codelineno-34-24 name=__codelineno-34-24></a><span class=err>|                 |       |            |                      |                      |          |         | adcast)   |           |</span>
</span><span id=__span-34-25><a id=__codelineno-34-25 name=__codelineno-34-25></a><span class=err>| </span><span class=no>192.168.12.0/30 </span><span class=err>|</span> <span class=no>0</span> <span class=err>    | bgp        | bgp_mgr              | </span><span class=l>True</span><span class=err>/</span><span class=l>success</span><span class=err>         |</span> <span class=no>0</span> <span class=err>       |</span> <span class=no>170</span> <span class=err>    | 192.168.1 | None      |</span>
</span><span id=__span-34-26><a id=__codelineno-34-26 name=__codelineno-34-26></a><span class=err>|                 |       |            |                      |                      |          |         | 1.2 (indi |           |</span>
</span><span id=__span-34-27><a id=__codelineno-34-27 name=__codelineno-34-27></a><span class=err>|                 |       |            |                      |                      |          |         | rect)     |           |</span>
</span><span id=__span-34-28><a id=__codelineno-34-28 name=__codelineno-34-28></a><span class=err>+-----------------+-------+------------+----------------------+----------------------+----------+---------+-----------+-----------+</span>
</span><span id=__span-34-29><a id=__codelineno-34-29 name=__codelineno-34-29></a><span class=c>-----------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-34-30><a id=__codelineno-34-30 name=__codelineno-34-30></a><span class=no>7</span> <span class=err>IPv4 routes total</span>
</span><span id=__span-34-31><a id=__codelineno-34-31 name=__codelineno-34-31></a><span class=no>7</span> <span class=err>IPv4 prefixes with active routes</span>
</span><span id=__span-34-32><a id=__codelineno-34-32 name=__codelineno-34-32></a><span class=no>0</span> <span class=err>IPv4 prefixes with active ECMP routes</span>
</span><span id=__span-34-33><a id=__codelineno-34-33 name=__codelineno-34-33></a><span class=c>-----------------------------------------------------------------------------------------------------------------------------------</span>
</span></code></pre></div></td></tr></table></div> <p>Both <code>leaf2</code> and <code>spine1</code> prefixes are found in the route table of network-instance <code>default</code> and the <code>bgp_mgr</code> is the owner of those prefixes, which means that they have been added to the route-table by the BGP app.</p> <h3 id=dataplane>Dataplane<a class=headerlink href=#dataplane title="Permanent link">#</a></h3> <p>To finish the verification process let's ensure that the datapath is indeed working, and the VTEPs on both leafs can reach each other via the routed fabric underlay.</p> <p>For that we will use the <code>ping</code> command with src/dst set to loopback addresses:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-35-1><a href=#__codelineno-35-1 id=__codelineno-35-1 name=__codelineno-35-1></a>--{ running }--[  ]--
</span><span id=__span-35-2><a href=#__codelineno-35-2 id=__codelineno-35-2 name=__codelineno-35-2></a>A:leaf1# ping -I 10.0.0.1 network-instance default 10.0.0.2
</span><span id=__span-35-3><a href=#__codelineno-35-3 id=__codelineno-35-3 name=__codelineno-35-3></a>Using network instance default
</span><span id=__span-35-4><a href=#__codelineno-35-4 id=__codelineno-35-4 name=__codelineno-35-4></a>PING 10.0.0.2 (10.0.0.2) from 10.0.0.1 : 56(84) bytes of data.
</span><span id=__span-35-5><a href=#__codelineno-35-5 id=__codelineno-35-5 name=__codelineno-35-5></a>64 bytes from 10.0.0.2: icmp_seq=1 ttl=63 time=17.5 ms
</span><span id=__span-35-6><a href=#__codelineno-35-6 id=__codelineno-35-6 name=__codelineno-35-6></a>64 bytes from 10.0.0.2: icmp_seq=2 ttl=63 time=12.2 ms
</span></code></pre></div> <p>Perfect, the VTEPs are reachable and the fabric underlay is properly configured. We can proceed with EVPN service configuration!</p> <h2 id=resulting-configs>Resulting configs<a class=headerlink href=#resulting-configs title="Permanent link">#</a></h2> <p>Below you will find aggregated configuration snippets which contain the entire fabric configuration we did in the steps above. Those snippets are in the <em>flat</em> format and were extracted with <code>info flat</code> command.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><code>enter candidate</code> and <code>commit now</code> commands are part of the snippets, so it is possible to paste them right after you logged into the devices as well as the changes will get committed to running config.</p> </div> <div class="tabbed-set tabbed-alternate" data-tabs=5:3><input checked=checked id=__tabbed_5_1 name=__tabbed_5 type=radio><input id=__tabbed_5_2 name=__tabbed_5 type=radio><input id=__tabbed_5_3 name=__tabbed_5 type=radio><div class=tabbed-labels><label for=__tabbed_5_1>leaf1</label><label for=__tabbed_5_2>leaf2</label><label for=__tabbed_5_3>spine1</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-36-1><a href=#__codelineno-36-1 id=__codelineno-36-1 name=__codelineno-36-1></a><span class=kr>enter</span><span class=err> candidate</span>
</span><span id=__span-36-2><a href=#__codelineno-36-2 id=__codelineno-36-2 name=__codelineno-36-2></a>
</span><span id=__span-36-3><a href=#__codelineno-36-3 id=__codelineno-36-3 name=__codelineno-36-3></a><span class=c># configuration of the physical interface and its subinterface</span>
</span><span id=__span-36-4><a href=#__codelineno-36-4 id=__codelineno-36-4 name=__codelineno-36-4></a><span class=err>set / interface </span><span class=no>ethernet-1/49</span>
</span><span id=__span-36-5><a href=#__codelineno-36-5 id=__codelineno-36-5 name=__codelineno-36-5></a><span class=err>set / interface </span><span class=no>ethernet-1/49</span><span class=err> subinterface</span> <span class=no>0</span>
</span><span id=__span-36-6><a href=#__codelineno-36-6 id=__codelineno-36-6 name=__codelineno-36-6></a><span class=err>set / interface </span><span class=no>ethernet-1/49</span><span class=err> subinterface</span> <span class=no>0</span> <span class=err>ipv4</span>
</span><span id=__span-36-7><a href=#__codelineno-36-7 id=__codelineno-36-7 name=__codelineno-36-7></a><span class=err>set / interface </span><span class=no>ethernet-1/49</span><span class=err> subinterface</span> <span class=no>0</span> <span class=err>ipv4 address </span><span class=no>192.168.11.1/30</span>
</span><span id=__span-36-8><a href=#__codelineno-36-8 id=__codelineno-36-8 name=__codelineno-36-8></a>
</span><span id=__span-36-9><a href=#__codelineno-36-9 id=__codelineno-36-9 name=__codelineno-36-9></a><span class=c># system interface configuration</span>
</span><span id=__span-36-10><a href=#__codelineno-36-10 id=__codelineno-36-10 name=__codelineno-36-10></a><span class=err>set / interface </span><span class=no>system0</span>
</span><span id=__span-36-11><a href=#__codelineno-36-11 id=__codelineno-36-11 name=__codelineno-36-11></a><span class=err>set / interface </span><span class=no>system0</span><span class=err> admin-state </span><span class=l>enable</span>
</span><span id=__span-36-12><a href=#__codelineno-36-12 id=__codelineno-36-12 name=__codelineno-36-12></a><span class=err>set / interface </span><span class=no>system0</span><span class=err> subinterface</span> <span class=no>0</span>
</span><span id=__span-36-13><a href=#__codelineno-36-13 id=__codelineno-36-13 name=__codelineno-36-13></a><span class=err>set / interface </span><span class=no>system0</span><span class=err> subinterface</span> <span class=no>0</span> <span class=err>ipv4</span>
</span><span id=__span-36-14><a href=#__codelineno-36-14 id=__codelineno-36-14 name=__codelineno-36-14></a><span class=err>set / interface </span><span class=no>system0</span><span class=err> subinterface</span> <span class=no>0</span> <span class=err>ipv4 address </span><span class=no>10.0.0.1/32</span>
</span><span id=__span-36-15><a href=#__codelineno-36-15 id=__codelineno-36-15 name=__codelineno-36-15></a>
</span><span id=__span-36-16><a href=#__codelineno-36-16 id=__codelineno-36-16 name=__codelineno-36-16></a><span class=c># associating interfaces with net-ins default</span>
</span><span id=__span-36-17><a href=#__codelineno-36-17 id=__codelineno-36-17 name=__codelineno-36-17></a><span class=err>set / network-instance default</span>
</span><span id=__span-36-18><a href=#__codelineno-36-18 id=__codelineno-36-18 name=__codelineno-36-18></a><span class=err>set / network-instance default interface </span><span class=no>ethernet-1/49.0</span>
</span><span id=__span-36-19><a href=#__codelineno-36-19 id=__codelineno-36-19 name=__codelineno-36-19></a><span class=err>set / network-instance default interface </span><span class=no>system0.0</span>
</span><span id=__span-36-20><a href=#__codelineno-36-20 id=__codelineno-36-20 name=__codelineno-36-20></a>
</span><span id=__span-36-21><a href=#__codelineno-36-21 id=__codelineno-36-21 name=__codelineno-36-21></a><span class=c># routing policy</span>
</span><span id=__span-36-22><a href=#__codelineno-36-22 id=__codelineno-36-22 name=__codelineno-36-22></a><span class=err>set / routing-policy</span>
</span><span id=__span-36-23><a href=#__codelineno-36-23 id=__codelineno-36-23 name=__codelineno-36-23></a><span class=err>set / routing-policy policy all</span>
</span><span id=__span-36-24><a href=#__codelineno-36-24 id=__codelineno-36-24 name=__codelineno-36-24></a><span class=err>set / routing-policy policy all default-action</span>
</span><span id=__span-36-25><a href=#__codelineno-36-25 id=__codelineno-36-25 name=__codelineno-36-25></a><span class=err>set / routing-policy policy all default-action policy-result </span><span class=l>accept</span>
</span><span id=__span-36-26><a href=#__codelineno-36-26 id=__codelineno-36-26 name=__codelineno-36-26></a>
</span><span id=__span-36-27><a href=#__codelineno-36-27 id=__codelineno-36-27 name=__codelineno-36-27></a><span class=c># BGP configuration</span>
</span><span id=__span-36-28><a href=#__codelineno-36-28 id=__codelineno-36-28 name=__codelineno-36-28></a><span class=err>set / network-instance default protocols</span>
</span><span id=__span-36-29><a href=#__codelineno-36-29 id=__codelineno-36-29 name=__codelineno-36-29></a><span class=err>set / network-instance default protocols bgp</span>
</span><span id=__span-36-30><a href=#__codelineno-36-30 id=__codelineno-36-30 name=__codelineno-36-30></a><span class=err>set / network-instance default protocols bgp autonomous-system</span> <span class=no>101</span>
</span><span id=__span-36-31><a href=#__codelineno-36-31 id=__codelineno-36-31 name=__codelineno-36-31></a><span class=err>set / network-instance default protocols bgp router-id </span><span class=no>10.0.0.1</span>
</span><span id=__span-36-32><a href=#__codelineno-36-32 id=__codelineno-36-32 name=__codelineno-36-32></a><span class=err>set / network-instance default protocols bgp group eBGP-underlay</span>
</span><span id=__span-36-33><a href=#__codelineno-36-33 id=__codelineno-36-33 name=__codelineno-36-33></a><span class=err>set / network-instance default protocols bgp group eBGP-underlay export-policy all</span>
</span><span id=__span-36-34><a href=#__codelineno-36-34 id=__codelineno-36-34 name=__codelineno-36-34></a><span class=err>set / network-instance default protocols bgp group eBGP-underlay import-policy all</span>
</span><span id=__span-36-35><a href=#__codelineno-36-35 id=__codelineno-36-35 name=__codelineno-36-35></a><span class=err>set / network-instance default protocols bgp group eBGP-underlay peer-as</span> <span class=no>201</span>
</span><span id=__span-36-36><a href=#__codelineno-36-36 id=__codelineno-36-36 name=__codelineno-36-36></a><span class=err>set / network-instance default protocols bgp ipv4-unicast</span>
</span><span id=__span-36-37><a href=#__codelineno-36-37 id=__codelineno-36-37 name=__codelineno-36-37></a><span class=err>set / network-instance default protocols bgp ipv4-unicast admin-state </span><span class=l>enable</span>
</span><span id=__span-36-38><a href=#__codelineno-36-38 id=__codelineno-36-38 name=__codelineno-36-38></a><span class=err>set / network-instance default protocols bgp neighbor </span><span class=no>192.168.11.2</span>
</span><span id=__span-36-39><a href=#__codelineno-36-39 id=__codelineno-36-39 name=__codelineno-36-39></a><span class=err>set / network-instance default protocols bgp neighbor </span><span class=no>192.168.11.2 </span><span class=err>peer-group eBGP-underlay</span>
</span><span id=__span-36-40><a href=#__codelineno-36-40 id=__codelineno-36-40 name=__codelineno-36-40></a>
</span><span id=__span-36-41><a href=#__codelineno-36-41 id=__codelineno-36-41 name=__codelineno-36-41></a><span class=kr>commit</span><span class=err> now</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-37-1><a href=#__codelineno-37-1 id=__codelineno-37-1 name=__codelineno-37-1></a><span class=kr>enter</span><span class=err> candidate</span>
</span><span id=__span-37-2><a href=#__codelineno-37-2 id=__codelineno-37-2 name=__codelineno-37-2></a>
</span><span id=__span-37-3><a href=#__codelineno-37-3 id=__codelineno-37-3 name=__codelineno-37-3></a><span class=c># configuration of the physical interface and its subinterface</span>
</span><span id=__span-37-4><a href=#__codelineno-37-4 id=__codelineno-37-4 name=__codelineno-37-4></a><span class=err>set / interface </span><span class=no>ethernet-1/49</span>
</span><span id=__span-37-5><a href=#__codelineno-37-5 id=__codelineno-37-5 name=__codelineno-37-5></a><span class=err>set / interface </span><span class=no>ethernet-1/49</span><span class=err> subinterface</span> <span class=no>0</span>
</span><span id=__span-37-6><a href=#__codelineno-37-6 id=__codelineno-37-6 name=__codelineno-37-6></a><span class=err>set / interface </span><span class=no>ethernet-1/49</span><span class=err> subinterface</span> <span class=no>0</span> <span class=err>ipv4</span>
</span><span id=__span-37-7><a href=#__codelineno-37-7 id=__codelineno-37-7 name=__codelineno-37-7></a><span class=err>set / interface </span><span class=no>ethernet-1/49</span><span class=err> subinterface</span> <span class=no>0</span> <span class=err>ipv4 address </span><span class=no>192.168.12.1/30</span>
</span><span id=__span-37-8><a href=#__codelineno-37-8 id=__codelineno-37-8 name=__codelineno-37-8></a>
</span><span id=__span-37-9><a href=#__codelineno-37-9 id=__codelineno-37-9 name=__codelineno-37-9></a><span class=c># system interface configuration</span>
</span><span id=__span-37-10><a href=#__codelineno-37-10 id=__codelineno-37-10 name=__codelineno-37-10></a><span class=err>set / interface </span><span class=no>system0</span>
</span><span id=__span-37-11><a href=#__codelineno-37-11 id=__codelineno-37-11 name=__codelineno-37-11></a><span class=err>set / interface </span><span class=no>system0</span><span class=err> admin-state </span><span class=l>enable</span>
</span><span id=__span-37-12><a href=#__codelineno-37-12 id=__codelineno-37-12 name=__codelineno-37-12></a><span class=err>set / interface </span><span class=no>system0</span><span class=err> subinterface</span> <span class=no>0</span>
</span><span id=__span-37-13><a href=#__codelineno-37-13 id=__codelineno-37-13 name=__codelineno-37-13></a><span class=err>set / interface </span><span class=no>system0</span><span class=err> subinterface</span> <span class=no>0</span> <span class=err>ipv4</span>
</span><span id=__span-37-14><a href=#__codelineno-37-14 id=__codelineno-37-14 name=__codelineno-37-14></a><span class=err>set / interface </span><span class=no>system0</span><span class=err> subinterface</span> <span class=no>0</span> <span class=err>ipv4 address </span><span class=no>10.0.0.2/32</span>
</span><span id=__span-37-15><a href=#__codelineno-37-15 id=__codelineno-37-15 name=__codelineno-37-15></a>
</span><span id=__span-37-16><a href=#__codelineno-37-16 id=__codelineno-37-16 name=__codelineno-37-16></a><span class=c># associating interfaces with net-ins default</span>
</span><span id=__span-37-17><a href=#__codelineno-37-17 id=__codelineno-37-17 name=__codelineno-37-17></a><span class=err>set / network-instance default</span>
</span><span id=__span-37-18><a href=#__codelineno-37-18 id=__codelineno-37-18 name=__codelineno-37-18></a><span class=err>set / network-instance default interface </span><span class=no>ethernet-1/49.0</span>
</span><span id=__span-37-19><a href=#__codelineno-37-19 id=__codelineno-37-19 name=__codelineno-37-19></a><span class=err>set / network-instance default interface </span><span class=no>system0.0</span>
</span><span id=__span-37-20><a href=#__codelineno-37-20 id=__codelineno-37-20 name=__codelineno-37-20></a>
</span><span id=__span-37-21><a href=#__codelineno-37-21 id=__codelineno-37-21 name=__codelineno-37-21></a><span class=c># routing policy</span>
</span><span id=__span-37-22><a href=#__codelineno-37-22 id=__codelineno-37-22 name=__codelineno-37-22></a><span class=err>set / routing-policy</span>
</span><span id=__span-37-23><a href=#__codelineno-37-23 id=__codelineno-37-23 name=__codelineno-37-23></a><span class=err>set / routing-policy policy all</span>
</span><span id=__span-37-24><a href=#__codelineno-37-24 id=__codelineno-37-24 name=__codelineno-37-24></a><span class=err>set / routing-policy policy all default-action</span>
</span><span id=__span-37-25><a href=#__codelineno-37-25 id=__codelineno-37-25 name=__codelineno-37-25></a><span class=err>set / routing-policy policy all default-action policy-result </span><span class=l>accept</span>
</span><span id=__span-37-26><a href=#__codelineno-37-26 id=__codelineno-37-26 name=__codelineno-37-26></a>
</span><span id=__span-37-27><a href=#__codelineno-37-27 id=__codelineno-37-27 name=__codelineno-37-27></a><span class=c># BGP configuration</span>
</span><span id=__span-37-28><a href=#__codelineno-37-28 id=__codelineno-37-28 name=__codelineno-37-28></a><span class=err>set / network-instance default protocols</span>
</span><span id=__span-37-29><a href=#__codelineno-37-29 id=__codelineno-37-29 name=__codelineno-37-29></a><span class=err>set / network-instance default protocols bgp</span>
</span><span id=__span-37-30><a href=#__codelineno-37-30 id=__codelineno-37-30 name=__codelineno-37-30></a><span class=err>set / network-instance default protocols bgp autonomous-system</span> <span class=no>102</span>
</span><span id=__span-37-31><a href=#__codelineno-37-31 id=__codelineno-37-31 name=__codelineno-37-31></a><span class=err>set / network-instance default protocols bgp router-id </span><span class=no>10.0.0.2</span>
</span><span id=__span-37-32><a href=#__codelineno-37-32 id=__codelineno-37-32 name=__codelineno-37-32></a><span class=err>set / network-instance default protocols bgp group eBGP-underlay</span>
</span><span id=__span-37-33><a href=#__codelineno-37-33 id=__codelineno-37-33 name=__codelineno-37-33></a><span class=err>set / network-instance default protocols bgp group eBGP-underlay export-policy all</span>
</span><span id=__span-37-34><a href=#__codelineno-37-34 id=__codelineno-37-34 name=__codelineno-37-34></a><span class=err>set / network-instance default protocols bgp group eBGP-underlay import-policy all</span>
</span><span id=__span-37-35><a href=#__codelineno-37-35 id=__codelineno-37-35 name=__codelineno-37-35></a><span class=err>set / network-instance default protocols bgp group eBGP-underlay peer-as</span> <span class=no>201</span>
</span><span id=__span-37-36><a href=#__codelineno-37-36 id=__codelineno-37-36 name=__codelineno-37-36></a><span class=err>set / network-instance default protocols bgp ipv4-unicast</span>
</span><span id=__span-37-37><a href=#__codelineno-37-37 id=__codelineno-37-37 name=__codelineno-37-37></a><span class=err>set / network-instance default protocols bgp ipv4-unicast admin-state </span><span class=l>enable</span>
</span><span id=__span-37-38><a href=#__codelineno-37-38 id=__codelineno-37-38 name=__codelineno-37-38></a><span class=err>set / network-instance default protocols bgp neighbor </span><span class=no>192.168.12.2</span>
</span><span id=__span-37-39><a href=#__codelineno-37-39 id=__codelineno-37-39 name=__codelineno-37-39></a><span class=err>set / network-instance default protocols bgp neighbor </span><span class=no>192.168.12.2 </span><span class=err>peer-group eBGP-underlay</span>
</span><span id=__span-37-40><a href=#__codelineno-37-40 id=__codelineno-37-40 name=__codelineno-37-40></a>
</span><span id=__span-37-41><a href=#__codelineno-37-41 id=__codelineno-37-41 name=__codelineno-37-41></a><span class=kr>commit</span><span class=err> now</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-38-1><a href=#__codelineno-38-1 id=__codelineno-38-1 name=__codelineno-38-1></a><span class=kr>enter</span><span class=err> candidate</span>
</span><span id=__span-38-2><a href=#__codelineno-38-2 id=__codelineno-38-2 name=__codelineno-38-2></a>
</span><span id=__span-38-3><a href=#__codelineno-38-3 id=__codelineno-38-3 name=__codelineno-38-3></a><span class=c># configuration of the physical interface and its subinterface</span>
</span><span id=__span-38-4><a href=#__codelineno-38-4 id=__codelineno-38-4 name=__codelineno-38-4></a><span class=err>set / interface </span><span class=no>ethernet-1/1</span>
</span><span id=__span-38-5><a href=#__codelineno-38-5 id=__codelineno-38-5 name=__codelineno-38-5></a><span class=err>set / interface </span><span class=no>ethernet-1/1</span><span class=err> subinterface</span> <span class=no>0</span>
</span><span id=__span-38-6><a href=#__codelineno-38-6 id=__codelineno-38-6 name=__codelineno-38-6></a><span class=err>set / interface </span><span class=no>ethernet-1/1</span><span class=err> subinterface</span> <span class=no>0</span> <span class=err>ipv4</span>
</span><span id=__span-38-7><a href=#__codelineno-38-7 id=__codelineno-38-7 name=__codelineno-38-7></a><span class=err>set / interface </span><span class=no>ethernet-1/1</span><span class=err> subinterface</span> <span class=no>0</span> <span class=err>ipv4 address </span><span class=no>192.168.11.2/30</span>
</span><span id=__span-38-8><a href=#__codelineno-38-8 id=__codelineno-38-8 name=__codelineno-38-8></a><span class=err>set / interface </span><span class=no>ethernet-1/2</span>
</span><span id=__span-38-9><a href=#__codelineno-38-9 id=__codelineno-38-9 name=__codelineno-38-9></a><span class=err>set / interface </span><span class=no>ethernet-1/2</span><span class=err> subinterface</span> <span class=no>0</span>
</span><span id=__span-38-10><a href=#__codelineno-38-10 id=__codelineno-38-10 name=__codelineno-38-10></a><span class=err>set / interface </span><span class=no>ethernet-1/2</span><span class=err> subinterface</span> <span class=no>0</span> <span class=err>ipv4</span>
</span><span id=__span-38-11><a href=#__codelineno-38-11 id=__codelineno-38-11 name=__codelineno-38-11></a><span class=err>set / interface </span><span class=no>ethernet-1/2</span><span class=err> subinterface</span> <span class=no>0</span> <span class=err>ipv4 address </span><span class=no>192.168.12.2/30</span>
</span><span id=__span-38-12><a href=#__codelineno-38-12 id=__codelineno-38-12 name=__codelineno-38-12></a>
</span><span id=__span-38-13><a href=#__codelineno-38-13 id=__codelineno-38-13 name=__codelineno-38-13></a><span class=c># system interface configuration</span>
</span><span id=__span-38-14><a href=#__codelineno-38-14 id=__codelineno-38-14 name=__codelineno-38-14></a><span class=err>set / interface </span><span class=no>system0</span>
</span><span id=__span-38-15><a href=#__codelineno-38-15 id=__codelineno-38-15 name=__codelineno-38-15></a><span class=err>set / interface </span><span class=no>system0</span><span class=err> admin-state </span><span class=l>enable</span>
</span><span id=__span-38-16><a href=#__codelineno-38-16 id=__codelineno-38-16 name=__codelineno-38-16></a><span class=err>set / interface </span><span class=no>system0</span><span class=err> subinterface</span> <span class=no>0</span>
</span><span id=__span-38-17><a href=#__codelineno-38-17 id=__codelineno-38-17 name=__codelineno-38-17></a><span class=err>set / interface </span><span class=no>system0</span><span class=err> subinterface</span> <span class=no>0</span> <span class=err>ipv4</span>
</span><span id=__span-38-18><a href=#__codelineno-38-18 id=__codelineno-38-18 name=__codelineno-38-18></a><span class=err>set / interface </span><span class=no>system0</span><span class=err> subinterface</span> <span class=no>0</span> <span class=err>ipv4 address </span><span class=no>10.0.1.1/32</span>
</span><span id=__span-38-19><a href=#__codelineno-38-19 id=__codelineno-38-19 name=__codelineno-38-19></a>
</span><span id=__span-38-20><a href=#__codelineno-38-20 id=__codelineno-38-20 name=__codelineno-38-20></a><span class=c># associating interfaces with net-ins default</span>
</span><span id=__span-38-21><a href=#__codelineno-38-21 id=__codelineno-38-21 name=__codelineno-38-21></a><span class=err>set / network-instance default</span>
</span><span id=__span-38-22><a href=#__codelineno-38-22 id=__codelineno-38-22 name=__codelineno-38-22></a><span class=err>set / network-instance default interface </span><span class=no>ethernet-1/1.0</span>
</span><span id=__span-38-23><a href=#__codelineno-38-23 id=__codelineno-38-23 name=__codelineno-38-23></a><span class=err>set / network-instance default interface </span><span class=no>ethernet-1/2.0</span>
</span><span id=__span-38-24><a href=#__codelineno-38-24 id=__codelineno-38-24 name=__codelineno-38-24></a><span class=err>set / network-instance default interface </span><span class=no>system0.0</span>
</span><span id=__span-38-25><a href=#__codelineno-38-25 id=__codelineno-38-25 name=__codelineno-38-25></a>
</span><span id=__span-38-26><a href=#__codelineno-38-26 id=__codelineno-38-26 name=__codelineno-38-26></a><span class=c># routing policy</span>
</span><span id=__span-38-27><a href=#__codelineno-38-27 id=__codelineno-38-27 name=__codelineno-38-27></a><span class=err>set / routing-policy</span>
</span><span id=__span-38-28><a href=#__codelineno-38-28 id=__codelineno-38-28 name=__codelineno-38-28></a><span class=err>set / routing-policy policy all</span>
</span><span id=__span-38-29><a href=#__codelineno-38-29 id=__codelineno-38-29 name=__codelineno-38-29></a><span class=err>set / routing-policy policy all default-action</span>
</span><span id=__span-38-30><a href=#__codelineno-38-30 id=__codelineno-38-30 name=__codelineno-38-30></a><span class=err>set / routing-policy policy all default-action policy-result </span><span class=l>accept</span>
</span><span id=__span-38-31><a href=#__codelineno-38-31 id=__codelineno-38-31 name=__codelineno-38-31></a>
</span><span id=__span-38-32><a href=#__codelineno-38-32 id=__codelineno-38-32 name=__codelineno-38-32></a><span class=c># BGP configuration</span>
</span><span id=__span-38-33><a href=#__codelineno-38-33 id=__codelineno-38-33 name=__codelineno-38-33></a><span class=err>set / network-instance default protocols</span>
</span><span id=__span-38-34><a href=#__codelineno-38-34 id=__codelineno-38-34 name=__codelineno-38-34></a><span class=err>set / network-instance default protocols bgp</span>
</span><span id=__span-38-35><a href=#__codelineno-38-35 id=__codelineno-38-35 name=__codelineno-38-35></a><span class=err>set / network-instance default protocols bgp autonomous-system</span> <span class=no>201</span>
</span><span id=__span-38-36><a href=#__codelineno-38-36 id=__codelineno-38-36 name=__codelineno-38-36></a><span class=err>set / network-instance default protocols bgp router-id </span><span class=no>10.0.1.1</span>
</span><span id=__span-38-37><a href=#__codelineno-38-37 id=__codelineno-38-37 name=__codelineno-38-37></a><span class=err>set / network-instance default protocols bgp group eBGP-underlay</span>
</span><span id=__span-38-38><a href=#__codelineno-38-38 id=__codelineno-38-38 name=__codelineno-38-38></a><span class=err>set / network-instance default protocols bgp group eBGP-underlay export-policy all</span>
</span><span id=__span-38-39><a href=#__codelineno-38-39 id=__codelineno-38-39 name=__codelineno-38-39></a><span class=err>set / network-instance default protocols bgp group eBGP-underlay import-policy all</span>
</span><span id=__span-38-40><a href=#__codelineno-38-40 id=__codelineno-38-40 name=__codelineno-38-40></a><span class=err>set / network-instance default protocols bgp ipv4-unicast</span>
</span><span id=__span-38-41><a href=#__codelineno-38-41 id=__codelineno-38-41 name=__codelineno-38-41></a><span class=err>set / network-instance default protocols bgp ipv4-unicast admin-state </span><span class=l>enable</span>
</span><span id=__span-38-42><a href=#__codelineno-38-42 id=__codelineno-38-42 name=__codelineno-38-42></a><span class=err>set / network-instance default protocols bgp neighbor </span><span class=no>192.168.11.1</span>
</span><span id=__span-38-43><a href=#__codelineno-38-43 id=__codelineno-38-43 name=__codelineno-38-43></a><span class=err>set / network-instance default protocols bgp neighbor </span><span class=no>192.168.11.1 </span><span class=err>peer-as</span> <span class=no>101</span>
</span><span id=__span-38-44><a href=#__codelineno-38-44 id=__codelineno-38-44 name=__codelineno-38-44></a><span class=err>set / network-instance default protocols bgp neighbor </span><span class=no>192.168.11.1 </span><span class=err>peer-group eBGP-underlay</span>
</span><span id=__span-38-45><a href=#__codelineno-38-45 id=__codelineno-38-45 name=__codelineno-38-45></a><span class=err>set / network-instance default protocols bgp neighbor </span><span class=no>192.168.12.1</span>
</span><span id=__span-38-46><a href=#__codelineno-38-46 id=__codelineno-38-46 name=__codelineno-38-46></a><span class=err>set / network-instance default protocols bgp neighbor </span><span class=no>192.168.12.1 </span><span class=err>peer-as</span> <span class=no>102</span>
</span><span id=__span-38-47><a href=#__codelineno-38-47 id=__codelineno-38-47 name=__codelineno-38-47></a><span class=err>set / network-instance default protocols bgp neighbor </span><span class=no>192.168.12.1 </span><span class=err>peer-group eBGP-underlay</span>
</span><span id=__span-38-48><a href=#__codelineno-38-48 id=__codelineno-38-48 name=__codelineno-38-48></a>
</span><span id=__span-38-49><a href=#__codelineno-38-49 id=__codelineno-38-49 name=__codelineno-38-49></a><span class=kr>commit</span><span class=err> now</span>
</span></code></pre></div> </div> </div> </div> <div class=footnote> <hr> <ol> <li id=fn:1> <p>default SR Linux credentials are <code>admin:NokiaSrl1!</code>.Â <a class=footnote-backref href=#fnref:1 title="Jump back to footnote 1 in the text">â†©</a></p> </li> <li id=fn:2> <p>the snippets were extracted with <code>info interface ethernet-1/x</code> command issued in running mode.Â <a class=footnote-backref href=#fnref:2 title="Jump back to footnote 2 in the text">â†©</a></p> </li> <li id=fn:3> <p>you can paste those snippets right after you do <code>enter candidate</code>Â <a class=footnote-backref href=#fnref:3 title="Jump back to footnote 3 in the text">â†©</a></p> </li> <li id=fn:4> <p>a more practical import/export policy would only export/import the loopback prefixes from leaf nodes. The spine nodes would export/import only the bgp-owned routes, as services are not typically present on the spines.Â <a class=footnote-backref href=#fnref:4 title="Jump back to footnote 4 in the text">â†©</a></p> </li> </ol> </div> <h2 id=__comments>Comments</h2> <script async crossorigin=anonymous data-category=comments data-category-id=DIC_kwDOFtXuas4CR_vG data-emit-metadata=0 data-input-position=top data-lang=en data-loading=lazy data-mapping=pathname data-reactions-enabled=1 data-repo=srl-labs/learn-srlinux data-repo-id="MDEwOlJlcG9zaXRvcnkzODMxMTg5NTQ=" data-strict=0 data-theme=preferred_color_scheme src=https://giscus.app/client.js>
</script> <!-- Synchronize Giscus theme with palette --> <script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate" ? "dark" : "light"
        giscus.setAttribute("data-theme", theme)
    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function () {
        var ref = document.querySelector("[data-md-component=palette]")
        ref.addEventListener("change", function () {
            var palette = __md_get("__palette")
            if (palette && typeof palette.color === "object") {
                var theme = palette.color.scheme === "slate" ? "dark" : "light"

                /* Instruct Giscus to change theme */
                var frame = document.querySelector(".giscus-frame")
                frame.contentWindow.postMessage(
                    { giscus: { setConfig: { theme } } },
                    "https://giscus.app"
                )
            }
        })
    })
</script> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <a class="md-top md-icon" data-md-component=top hidden href=#> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg> Back to top </a> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <!--
  Copyright (c) 2016-2022 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Copyright and theme information --> <div class=md-copyright> <div class=md-copyright__highlight> Copyright Â© 2021-2023 Nokia </div> Made with <span class="twemoji mdx-heart"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M14 20.408c-.492.308-.903.546-1.192.709-.153.086-.308.17-.463.252h-.002a.75.75 0 0 1-.686 0 16.709 16.709 0 0 1-.465-.252 31.147 31.147 0 0 1-4.803-3.34C3.8 15.572 1 12.331 1 8.513 1 5.052 3.829 2.5 6.736 2.5 9.03 2.5 10.881 3.726 12 5.605 13.12 3.726 14.97 2.5 17.264 2.5 20.17 2.5 23 5.052 23 8.514c0 3.818-2.801 7.06-5.389 9.262A31.146 31.146 0 0 1 14 20.408Z"></path></svg> </span> by <a href=https://github.com/srl-labs rel=noopener target=_blank> SR Linux team </a> </div> <div class=md-social> <a class=md-social__link href=https://discord.gg/tZvgjQ6PZf rel=noopener target=_blank title=discord.gg> <svg viewbox="0 0 640 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"></path></svg> </a> <a class=md-social__link href=https://github.com/srl-labs rel=noopener target=_blank title=github.com> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </a> <a class=md-social__link href=https://twitter.com/ntdvps rel=noopener target=_blank title=twitter.com> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.top", "navigation.instant", "navigation.tabs", "search.suggest", "content.code.annotate", "content.code.copy", "content.code.select", "content.action.edit", "toc.follow", "content.tooltips", "navigation.indexes", "announce.dismiss"], "search": "../../../assets/javascripts/workers/search.6c7302c4.min.js", "tags": {"media": "media"}, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.542a4128.min.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body> </html>